{"version":3,"sources":["store/session.js","store/devices.js","store/positions.js","store/index.js","common/localization.js","RemoveDialog.js","EditCollectionView.js","reactHelper.js","DevicesList.js","MainToolbar.js","map/switcher/switcher.js","common/deviceCategories.js","map/mapUtil.js","map/mapStyles.js","common/preferences.js","map/Map.js","map/SelectedDeviceMap.js","map/AccuracyMap.js","map/GeofenceMap.js","common/formatter.js","map/StatusView.js","map/PositionsMap.js","map/CurrentPositionsMap.js","map/CurrentLocationMap.js","MainPage.js","LoginPage.js","reports/ReportFilter.js","reports/ReportLayoutPage.js","reports/RouteReportPage.js","attributes/AddAttributeDialog.js","attributes/EditAttributesView.js","attributes/deviceAttributes.js","attributes/userAttributes.js","admin/ServerPage.js","admin/UsersPage.js","EditItemView.js","form/SelectField.js","form/LinkField.js","common/stringUtils.js","DevicePage.js","UserPage.js","SocketController.js","settings/NotificationsPage.js","settings/NotificationPage.js","settings/GroupsPage.js","settings/GroupPage.js","PositionPage.js","reports/EventReportPage.js","map/ReplayPathMap.js","reports/ReplayPage.js","reports/TripReportPage.js","reports/StopReportPage.js","reports/SummaryReportPage.js","App.js","serviceWorker.js","index.js"],"names":["createSlice","name","initialState","server","user","reducers","updateServer","state","action","payload","updateUser","reducer","actions","items","selectedId","refresh","forEach","item","update","select","id","remove","combineReducers","session","devices","positions","configureStore","supportedLanguages","data","af","ar","az","bg","bn","cs","de","da","el","en","es","fa","fi","fr","he","hi","hr","hu","it","ja","ka","kk","km","languages","undefined","window","navigator","slice","language","userLanguage","push","substring","i","length","replace","selectedLanguage","key","RemoveDialog","open","endpoint","itemId","onResult","handleRemove","a","fetch","method","ok","Dialog","onClose","DialogContent","DialogContentText","t","DialogActions","Button","color","onClick","autoFocus","useStyles","makeStyles","theme","fab","position","bottom","spacing","right","EditCollectionView","content","editPath","classes","history","useHistory","useState","setSelectedId","selectedAnchorEl","setSelectedAnchorEl","removeDialogShown","setRemoveDialogShown","Date","now","updateTimestamp","setUpdateTimestamp","menuHide","Content","onMenuClick","anchorId","Fab","size","className","Menu","anchorEl","MenuItem","useEffectAsync","effect","deps","useEffect","list","maxHeight","overflow","icon","width","height","filter","DeviceView","dispatch","useDispatch","useSelector","Object","values","response","devicesActions","json","List","map","index","ListItem","button","ListItemAvatar","Avatar","src","category","alt","ListItemText","primary","secondary","uniqueId","ListItemSecondaryAction","IconButton","event","currentTarget","Divider","DevicesList","flex","flexGrow","appBar","zIndex","drawer","menuButton","marginLeft","marginRight","MainToolbar","setDrawer","adminEnabled","administrator","userId","closeDrawer","handleLogout","sessionActions","AppBar","Toolbar","Typography","variant","Drawer","tabIndex","role","onKeyDown","ListItemIcon","subheader","ListSubheader","disabled","SwitcherControl","styles","defaultStyle","beforeSwitch","afterSwitch","this","onDocumentClick","bind","controlContainer","document","createElement","classList","add","mapStyleContainer","styleButton","type","style","styleElement","innerText","title","dataset","uri","JSON","stringify","addEventListener","srcElement","contains","setStyle","parse","display","elms","getElementsByClassName","appendChild","parentNode","removeEventListener","removeChild","target","deviceCategories","loadImage","url","Promise","imageLoaded","image","Image","onload","loadIcon","background","pixelRatio","devicePixelRatio","canvas","context","getContext","drawImage","imageWidth","imageHeight","getImageData","reverseCoordinates","Array","isArray","Number","isNaN","coordinates","styleMapbox","useAttributePreference","defaultValue","forceSettings","attributes","element","mapboxgl","Map","container","version","sources","osm","tiles","attribution","glyphs","layers","source","ready","readyListeners","Set","console","log","updateReadyValue","value","listener","initMap","all","hasImage","imageData","addImage","on","addControl","NavigationControl","showCompass","waiting","loaded","setTimeout","children","containerEl","useRef","mapReady","setMapReady","mapboxAccessToken","accessToken","addReadyListener","delete","removeReadyListener","useLayoutEffect","currentEl","current","resize","ref","SelectedDeviceMap","mapCenter","longitude","latitude","easeTo","center","AccuracyMap","features","accuracy","circle","addSource","addLayer","removeLayer","removeSource","getSource","setData","GeofenceMap","geofences","setGeofences","wellknown","area","geometry","properties","formatPosition","moment","format","toFixed","formatNumber","formatBoolean","precision","formatDate","formatDistance","unit","formatSpeed","formatVolume","formatHours","duration","humanize","StatusView","deviceId","onShowDetails","device","status","serverTime","ignition","speed","motion","address","batteryLevel","href","e","preventDefault","PositionsMap","createFeature","onMouseEnter","getCanvas","cursor","onMouseLeave","onClickCallback","useCallback","feature","Math","abs","lngLat","lng","placeholder","ReactDOM","render","store","positionId","Popup","offset","anchor","setDOMContent","setLngLat","addTo","from","getContainer","off","CurrentPositionsMap","CurrentLocationMap","control","GeolocateControl","positionOptions","enableHighAccuracy","timeout","trackUserLocation","removeControl","root","flexDirection","breakpoints","down","drawerPaper","up","mapContainer","withWidth","isWidthUp","paper","marginTop","alignItems","padding","logo","buttons","justifyContent","flexBasis","LoginPage","failed","setFailed","email","setEmail","password","setPassword","handleLogin","body","URLSearchParams","Paper","onSubmit","TextField","margin","required","fullWidth","error","label","autoComplete","onChange","helperText","FormControl","ReportFilter","handleSubmit","showOnly","setDeviceId","period","setPeriod","subtract","setFrom","to","setTo","handleClick","mail","selectedFrom","selectedTo","startOf","endOf","accept","toISOString","Accept","InputLabel","Select","HTML5_FMT","DATETIME_LOCAL","ButtonGroup","orientation","form","ReportLayoutPage","ReportFilterForm","reportFilterForm","setItems","Grid","xs","md","lg","headers","query","toString","contentType","get","location","URL","blob","createObjectURL","assign","RouteReportPage","TableContainer","component","Table","TableHead","TableRow","TableCell","TableBody","AddAttributeDialog","definitions","createFilterOptions","option","options","entries","setKey","setType","maxWidth","Autocomplete","_","filterOptions","params","filtered","inputValue","getOptionLabel","renderOption","freeSolo","renderInput","addButton","marginBottom","removeButton","EditAttributesView","setAttributes","addDialogShown","setAddDialogShown","updateAttribute","updatedAttributes","deleteAttribute","getAttributeName","definition","getAttributeType","booleanList","otherList","concat","convertToList","direction","justify","FormControlLabel","Checkbox","checked","FilledInput","endAdornment","InputAdornment","startIcon","details","ServerPage","setItem","updatedItem","handleSave","goBack","Container","Accordion","defaultExpanded","AccordionSummary","expandIcon","AccordionDetails","announcement","registration","readonly","deviceReadonly","limitCommands","userAttributes","deviceAttributes","columnAction","UsersView","UsersPage","EditItemView","useParams","SelectField","multiple","keyGetter","titleGetter","LinkField","endpointAll","endpointLinked","baseId","keyBase","keyLink","linked","setLinked","createBody","linkId","oldValue","newValue","includes","added","removed","prefixString","prefix","charAt","toUpperCase","DevicePage","groupId","phone","model","contact","c","UserPage","connect","authenticated","connectSocket","protocol","socket","WebSocket","host","onclose","onmessage","positionsActions","events","displayNotifications","Notification","permission","notification","close","requestPermission","NotificationsView","formatList","split","Boolean","join","always","alarms","notificators","NotificationsPage","NotificationPage","predicate","startsWith","keys","toLowerCase","GroupsView","GroupsPage","GroupPage","PositionPage","formatKey","combinedList","attributesList","eventTypes","setEventTypes","append","EventReportPage","ReplayPathMap","bounds","reduce","extend","LngLatBounds","fitBounds","top","left","controlPanel","transform","controlContent","configForm","TimeLabel","Tooltip","enterTouchDelay","placement","ReplayPage","expanded","setExpanded","setPositions","setIndex","Slider","max","step","marks","valueLabelDisplay","valueLabelFormat","ValueLabelComponent","align","TripReportPage","distanceUnit","speedUnit","startTime","startOdometer","endTime","endOdometer","distance","averageSpeed","maxSpeed","StopReportPage","engineHours","spentFuel","daily","setDaily","SummaryReportPage","App","initialized","CssBaseline","exact","path","MainPage","LinearProgress","isLocalhost","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","then","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","getElementById","process","origin","indexOf","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.eff6db59.chunk.js","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nconst { reducer, actions } = createSlice({\n  name: 'session',\n  initialState: {\n    server: null,\n    user: null,\n  },\n  reducers: {\n    updateServer(state, action) {\n      state.server = action.payload;\n    },\n    updateUser(state, action) {\n      state.user = action.payload;\n    },\n  },\n});\n\nexport { actions as sessionActions };\nexport { reducer as sessionReducer };\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst { reducer, actions } = createSlice({\n  name: 'devices',\n  initialState: {\n    items: {},\n    selectedId: null\n  },\n  reducers: {\n    refresh(state, action) {\n      state.items = {};\n      action.payload.forEach(item => state.items[item['id']] = item);\n    },\n    update(state, action) {\n      action.payload.forEach(item => state.items[item['id']] = item);\n    },\n    select(state, action) {\n      state.selectedId = action.payload.id;\n    },\n    remove(state, action) {\n      delete state.items[action.payload];\n    },\n  }\n});\n\nexport { actions as devicesActions };\nexport { reducer as devicesReducer };\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst { reducer, actions } = createSlice({\n  name: 'positions',\n  initialState: {\n    items: {},\n  },\n  reducers: {\n    update(state, action) {\n      action.payload.forEach(item => state.items[item['deviceId']] = item);\n    },\n  }\n});\n\nexport { actions as positionsActions };\nexport { reducer as positionsReducer };\n","import { combineReducers, configureStore } from '@reduxjs/toolkit';\n\nimport { sessionReducer as session } from './session';\nimport { devicesReducer as devices } from './devices';\nimport { positionsReducer as positions } from './positions';\n\nconst reducer = combineReducers({\n  session,\n  devices,\n  positions,\n});\n\nexport { sessionActions } from './session';\nexport { devicesActions } from './devices';\nexport { positionsActions } from './positions';\n\nexport default configureStore({ reducer });\n","import af from '../../web/l10n/af.json';\nimport ar from '../../web/l10n/ar.json';\nimport az from '../../web/l10n/az.json';\nimport bg from '../../web/l10n/bg.json';\nimport bn from '../../web/l10n/bn.json';\nimport cs from '../../web/l10n/cs.json';\nimport da from '../../web/l10n/da.json';\nimport de from '../../web/l10n/de.json';\nimport el from '../../web/l10n/el.json';\nimport en from '../../web/l10n/en.json';\nimport es from '../../web/l10n/es.json';\nimport fa from '../../web/l10n/fa.json';\nimport fi from '../../web/l10n/fi.json';\nimport fr from '../../web/l10n/fr.json';\nimport he from '../../web/l10n/he.json';\nimport hi from '../../web/l10n/hi.json';\nimport hr from '../../web/l10n/hr.json';\nimport hu from '../../web/l10n/hu.json';\nimport id from '../../web/l10n/id.json';\nimport it from '../../web/l10n/it.json';\nimport ja from '../../web/l10n/ja.json';\nimport ka from '../../web/l10n/ka.json';\nimport kk from '../../web/l10n/kk.json';\nimport km from '../../web/l10n/km.json';\nimport ko from '../../web/l10n/ko.json';\nimport lo from '../../web/l10n/lo.json';\nimport lt from '../../web/l10n/lt.json';\nimport lv from '../../web/l10n/lv.json';\nimport ml from '../../web/l10n/ml.json';\nimport ms from '../../web/l10n/ms.json';\nimport nb from '../../web/l10n/nb.json';\nimport ne from '../../web/l10n/ne.json';\nimport nl from '../../web/l10n/nl.json';\nimport nn from '../../web/l10n/nn.json';\nimport pl from '../../web/l10n/pl.json';\nimport pt from '../../web/l10n/pt.json';\nimport pt_BR from '../../web/l10n/pt_BR.json';\nimport ro from '../../web/l10n/ro.json';\nimport ru from '../../web/l10n/ru.json';\nimport si from '../../web/l10n/si.json';\nimport sk from '../../web/l10n/sk.json';\nimport sl from '../../web/l10n/sl.json';\nimport sq from '../../web/l10n/sq.json';\nimport sr from '../../web/l10n/sr.json';\nimport sv from '../../web/l10n/sv.json';\nimport ta from '../../web/l10n/ta.json';\nimport th from '../../web/l10n/th.json';\nimport tr from '../../web/l10n/tr.json';\nimport uk from '../../web/l10n/uk.json';\nimport uz from '../../web/l10n/uz.json';\nimport vi from '../../web/l10n/vi.json';\nimport zh from '../../web/l10n/zh.json';\nimport zh_TW from '../../web/l10n/zh_TW.json';\n\nconst supportedLanguages = {\n  'af': { data: af, name: 'Afrikaans' },\n  'ar': { data: ar, name: 'العربية' },\n  'az': { data: az, name: 'Azərbaycanca' },\n  'bg': { data: bg, name: 'Български' },\n  'bn': { data: bn, name: 'বাংলা' },\n  'cs': { data: cs, name: 'Čeština' },\n  'de': { data: de, name: 'Deutsch' },\n  'da': { data: da, name: 'Dansk' },\n  'el': { data: el, name: 'Ελληνικά' },\n  'en': { data: en, name: 'English' },\n  'es': { data: es, name: 'Español' },\n  'fa': { data: fa, name: 'فارسی' },\n  'fi': { data: fi, name: 'Suomi' },\n  'fr': { data: fr, name: 'Français' },\n  'he': { data: he, name: 'עברית' },\n  'hi': { data: hi, name: 'हिन्दी' },\n  'hr': { data: hr, name: 'Hrvatski' },\n  'hu': { data: hu, name: 'Magyar' },\n  'id': { data: id, name: 'Bahasa Indonesia' },\n  'it': { data: it, name: 'Italiano' },\n  'ja': { data: ja, name: '日本語' },\n  'ka': { data: ka, name: 'ქართული' },\n  'kk': { data: kk, name: 'Қазақша' },\n  'ko': { data: ko, name: '한국어' },\n  'km': { data: km, name: 'ភាសាខ្មែរ' },\n  'lo': { data: lo, name: 'ລາວ' },\n  'lt': { data: lt, name: 'Lietuvių' },\n  'lv': { data: lv, name: 'Latviešu' },\n  'ml': { data: ml, name: 'മലയാളം' },\n  'ms': { data: ms, name: 'بهاس ملايو' },\n  'nb': { data: nb, name: 'Norsk bokmål' },\n  'ne': { data: ne, name: 'नेपाली' },\n  'nl': { data: nl, name: 'Nederlands' },\n  'nn': { data: nn, name: 'Norsk nynorsk' },\n  'pl': { data: pl, name: 'Polski' },\n  'pt': { data: pt, name: 'Português' },\n  'pt_BR': { data: pt_BR, name: 'Português (Brasil)' },\n  'ro': { data: ro, name: 'Română' },\n  'ru': { data: ru, name: 'Русский' },\n  'si': { data: si, name: 'සිංහල' },\n  'sk': { data: sk, name: 'Slovenčina' },\n  'sl': { data: sl, name: 'Slovenščina' },\n  'sq': { data: sq, name: 'Shqipëria' },\n  'sr': { data: sr, name: 'Srpski' },\n  'sv': { data: sv, name: 'Svenska' },\n  'ta': { data: ta, name: 'தமிழ்' },\n  'th': { data: th, name: 'ไทย' },\n  'tr': { data: tr, name: 'Türkçe' },\n  'uk': { data: uk, name: 'Українська' },\n  'uz': { data: uz, name: 'Oʻzbekcha' },\n  'vi': { data: vi, name: 'Tiếng Việt' },\n  'zh': { data: zh, name: '中文' },\n  'zh_TW': { data: zh_TW, name: '中文 (Taiwan)' }\n};\n\nconst languages = window.navigator.languages !== undefined ? window.navigator.languages.slice() : [];\nlet language = window.navigator.userLanguage || window.navigator.language;\nlanguages.push(language);\nlanguages.push(language.substring(0, 2));\nlanguages.push('en');\nfor (let i = 0; i < languages.length; i++) {\n  language = languages[i].replace('-', '_');\n  if (language in supportedLanguages) {\n    break;\n  }\n  if (language.length > 2) {\n    language = languages[i].substring(0, 2);\n    if (language in supportedLanguages) {\n      break;\n    }\n  }\n}\n\nconst selectedLanguage = supportedLanguages[language];\n\nexport const findStringKeys = (predicate) => {\n  return Object.keys(selectedLanguage.data).filter(predicate);\n}\n\nexport default key => {\n  return selectedLanguage.data[key];\n};\n","import t from './common/localization'\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\n\nconst RemoveDialog = ({ open, endpoint, itemId, onResult }) => {\n  const handleRemove = async () => {\n    const response = await fetch(`/api/${endpoint}/${itemId}`, { method: 'DELETE' });\n    if (response.ok) {\n      onResult(true);\n    }\n  };\n\n  return (\n    <Dialog\n      open={open}\n      onClose={() => { onResult(false) }}>\n      <DialogContent>\n        <DialogContentText>{t('sharedRemoveConfirm')}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button color=\"primary\" onClick={handleRemove}>{t('sharedRemove')}</Button>\n        <Button autoFocus onClick={() => onResult(false)}>{t('sharedCancel')}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default RemoveDialog;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useHistory } from 'react-router-dom';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport t from './common/localization';\nimport RemoveDialog from './RemoveDialog';\n\nconst useStyles = makeStyles(theme => ({\n  fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n}));\n\nconst EditCollectionView = ({ content, editPath, endpoint }) => {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const [selectedId, setSelectedId] = useState(null);\n  const [selectedAnchorEl, setSelectedAnchorEl] = useState(null);\n  const [removeDialogShown, setRemoveDialogShown] = useState(false);\n  const [updateTimestamp, setUpdateTimestamp] = useState(Date.now());\n\n  const menuShow = (anchorId, itemId) => {\n    setSelectedAnchorEl(anchorId);\n    setSelectedId(itemId);\n  }\n\n  const menuHide = () => {\n    setSelectedAnchorEl(null);\n  }\n\n  const handleAdd = () => {\n    history.push(editPath);\n    menuHide();\n  }\n\n  const handleEdit = () => {\n    history.push(`${editPath}/${selectedId}`);\n    menuHide();\n  }\n\n  const handleRemove = () => {\n    setRemoveDialogShown(true);\n    menuHide();\n  }\n\n  const handleRemoveResult = () => {\n    setRemoveDialogShown(false);\n    setUpdateTimestamp(Date.now());\n  }\n\n  const Content = content;\n\n  return (\n    <>\n      <Content updateTimestamp={updateTimestamp} onMenuClick={menuShow} />\n      <Fab size=\"medium\" color=\"primary\" className={classes.fab} onClick={handleAdd}>\n        <AddIcon />\n      </Fab>\n      <Menu open={!!selectedAnchorEl} anchorEl={selectedAnchorEl} onClose={menuHide}>\n        <MenuItem onClick={handleEdit}>{t('sharedEdit')}</MenuItem>\n        <MenuItem onClick={handleRemove}>{t('sharedRemove')}</MenuItem>\n      </Menu>\n      <RemoveDialog open={removeDialogShown} endpoint={endpoint} itemId={selectedId} onResult={handleRemoveResult} />\n    </>\n  );\n}\n\nexport default EditCollectionView;\n","\nimport { useRef, useEffect } from 'react';\n\nexport const usePrevious = value => {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n};\n\nexport const useEffectAsync = (effect, deps) => {\n  useEffect(() => {\n    effect();\n  }, deps); // eslint-disable-line react-hooks/exhaustive-deps\n};\n","import React, { Fragment } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Avatar from '@material-ui/core/Avatar';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\n\nimport { devicesActions } from './store';\nimport EditCollectionView from './EditCollectionView';\nimport { useEffectAsync } from './reactHelper';\n\nconst useStyles = makeStyles(() => ({\n  list: {\n    maxHeight: '100%',\n    overflow: 'auto',\n  },\n  icon: {\n    width: '25px',\n    height: '25px',\n    filter: 'brightness(1) invert(0)',\n  },\n}));\n\nconst DeviceView = ({ updateTimestamp, onMenuClick }) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n\n  const items = useSelector(state => Object.values(state.devices.items));\n\n  useEffectAsync(async () => {\n    const response = await fetch('/api/devices');\n    if (response.ok) {\n      dispatch(devicesActions.refresh(await response.json()));\n    }\n  }, [updateTimestamp]);\n\n  return (\n    <List className={classes.list}>\n      {items.map((item, index, list) => (\n        <Fragment key={item.id}>\n          <ListItem button key={item.id} onClick={() => dispatch(devicesActions.select(item))}>\n            <ListItemAvatar>\n              <Avatar>\n                <img className={classes.icon} src={`images/icon/${item.category || 'default'}.svg`} alt=\"\" />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary={item.name} secondary={item.uniqueId} />\n            <ListItemSecondaryAction>\n              <IconButton onClick={(event) => onMenuClick(event.currentTarget, item.id)}>\n                <MoreVertIcon />\n              </IconButton>\n            </ListItemSecondaryAction>\n          </ListItem>\n          {index < list.length - 1 ? <Divider /> : null}\n        </Fragment>\n      ))}\n    </List>\n  );\n}\n\nconst DevicesList = () => {\n  return (\n    <EditCollectionView content={DeviceView} editPath=\"/device\" endpoint=\"devices\" />\n  );\n}\n\nexport default DevicesList;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { sessionActions } from './store';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MapIcon from '@material-ui/icons/Map';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport PeopleIcon from '@material-ui/icons/People';\nimport StorageIcon from '@material-ui/icons/Storage';\nimport PersonIcon from '@material-ui/icons/Person';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport TimelineIcon from '@material-ui/icons/Timeline';\nimport PauseCircleFilledIcon from '@material-ui/icons/PauseCircleFilled';\nimport PlayCircleFilledIcon from '@material-ui/icons/PlayCircleFilled';\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive';\nimport FormatListBulletedIcon from '@material-ui/icons/FormatListBulleted';\nimport TrendingUpIcon from '@material-ui/icons/TrendingUp';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport t from './common/localization';\n\nconst useStyles = makeStyles(theme => ({\n  flex: {\n    flexGrow: 1\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  list: {\n    width: 250\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20,\n  },\n}));\n\nconst MainToolbar = () => {\n  const dispatch = useDispatch();\n  const [drawer, setDrawer] = useState(false);\n  const classes = useStyles();\n  const history = useHistory();\n  const adminEnabled = useSelector(state => state.session.user && state.session.user.administrator);\n  const userId = useSelector(state => state.session.user && state.session.user.id);\n\n  const openDrawer = () => { setDrawer(true) }\n  const closeDrawer = () => { setDrawer(false) }\n\n  const handleLogout = async () => {\n    const response = await fetch('/api/session', { method: 'DELETE' });\n    if (response.ok) {\n      dispatch(sessionActions.updateUser(null));\n      history.push('/login');\n    }\n  }\n\n  return (\n    <>\n      <AppBar position=\"static\" className={classes.appBar}>\n        <Toolbar>\n          <IconButton\n            className={classes.menuButton}\n            color=\"inherit\"\n            onClick={openDrawer}>\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.flex}>\n            Proativa Rastreamento\n          </Typography>\n          <Button color=\"inherit\" onClick={handleLogout}>{t('loginLogout')}</Button>\n        </Toolbar>\n      </AppBar>\n      <Drawer open={drawer} onClose={closeDrawer}>\n        <div\n          tabIndex={0}\n          className={classes.list}\n          role=\"button\"\n          onClick={closeDrawer}\n          onKeyDown={closeDrawer}>\n          <List>\n            <ListItem button onClick={() => history.push('/')}>\n              <ListItemIcon>\n                <MapIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('mapTitle')} />\n            </ListItem>\n            <ListItem button onClick={() => history.push('/replay')}>\n              <ListItemIcon>\n                <ReplayIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportReplay')} />\n            </ListItem>\n          </List>\n          <Divider />\n          <List\n            subheader={\n              <ListSubheader>\n                {t('reportTitle')}\n              </ListSubheader>\n            }>\n            <ListItem button onClick={() => history.push('/reports/route')}>\n              <ListItemIcon>\n                <TimelineIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportRoute')} />\n            </ListItem>\n            <ListItem button onClick={() => history.push('/reports/event')}>\n              <ListItemIcon>\n                <NotificationsActiveIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportEvents')} />\n            </ListItem>\n            <ListItem button onClick={() => history.push('/reports/trip')}>\n              <ListItemIcon>\n                <PlayCircleFilledIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportTrips')} />\n            </ListItem>\n            <ListItem button onClick={() => history.push('/reports/stop')}>\n              <ListItemIcon>\n                <PauseCircleFilledIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportStops')} />\n            </ListItem>\n            <ListItem button onClick={() => history.push('/reports/summary')}>\n              <ListItemIcon>\n                <FormatListBulletedIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportSummary')} />\n            </ListItem>\n            <ListItem button disabled>\n              <ListItemIcon>\n                <TrendingUpIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportChart')} />\n            </ListItem>\n          </List>\n          <Divider />\n          <List\n            subheader={\n              <ListSubheader>\n                {t('settingsTitle')}\n              </ListSubheader>\n            }>\n            <ListItem button disabled={!userId} onClick={() => history.push(`/user/${userId}`)}>\n              <ListItemIcon>\n                <PersonIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('settingsUser')} />\n            </ListItem>\n            <ListItem button onClick={() => history.push('/settings/notifications')}>\n              <ListItemIcon>\n                <NotificationsIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('sharedNotifications')} />\n            </ListItem>\n            <ListItem button onClick={() => history.push('/settings/groups')}>\n              <ListItemIcon>\n                <FolderIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('settingsGroups')} />\n            </ListItem>\n          </List>\n          {adminEnabled && (\n            <>\n              <Divider />\n              <List\n                subheader={\n                  <ListSubheader>\n                    {t('userAdmin')}\n                  </ListSubheader>\n                }>\n                <ListItem button onClick={() => history.push('/admin/server')}>\n                  <ListItemIcon>\n                    <StorageIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={t('settingsServer')} />\n                </ListItem>\n                <ListItem button onClick={() => history.push('/admin/users')}>\n                  <ListItemIcon>\n                    <PeopleIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={t('settingsUsers')} />\n                </ListItem>\n                <ListItem button disabled>\n                  <ListItemIcon>\n                    <BarChartIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={t('statisticsTitle')} />\n                </ListItem>\n              </List>\n            </>\n          )}\n        </div>\n      </Drawer>\n    </>\n  );\n}\n\nexport default MainToolbar;\n","export class SwitcherControl {\n\n  constructor(styles, defaultStyle, beforeSwitch, afterSwitch) {\n    this.styles = styles;\n    this.defaultStyle = defaultStyle;\n    this.beforeSwitch = beforeSwitch;\n    this.afterSwitch = afterSwitch;\n    this.onDocumentClick = this.onDocumentClick.bind(this);\n  }\n\n  getDefaultPosition() {\n    return 'top-right';\n  }\n\n  onAdd(map) {\n    this.map = map;\n    this.controlContainer = document.createElement('div');\n    this.controlContainer.classList.add('mapboxgl-ctrl');\n    this.controlContainer.classList.add('mapboxgl-ctrl-group');\n    this.mapStyleContainer = document.createElement('div');\n    this.styleButton = document.createElement('button');\n    this.styleButton.type = 'button';\n    this.mapStyleContainer.classList.add('mapboxgl-style-list');\n    for (const style of this.styles) {\n      const styleElement = document.createElement('button');\n      styleElement.type = 'button';\n      styleElement.innerText = style.title;\n      styleElement.classList.add(style.title.replace(/[^a-z0-9-]/gi, '_'));\n      styleElement.dataset.uri = JSON.stringify(style.uri);\n      styleElement.addEventListener('click', event => {\n        const srcElement = event.srcElement;\n        if (srcElement.classList.contains('active')) {\n          return;\n        }\n        this.beforeSwitch();\n        this.map.setStyle(JSON.parse(srcElement.dataset.uri));\n        this.afterSwitch();\n        this.mapStyleContainer.style.display = 'none';\n        this.styleButton.style.display = 'block';\n        const elms = this.mapStyleContainer.getElementsByClassName('active');\n        while (elms[0]) {\n          elms[0].classList.remove('active');\n        }\n        srcElement.classList.add('active');\n      });\n      if (style.title === this.defaultStyle) {\n        styleElement.classList.add('active');\n      }\n      this.mapStyleContainer.appendChild(styleElement);\n    }\n    this.styleButton.classList.add('mapboxgl-ctrl-icon');\n    this.styleButton.classList.add('mapboxgl-style-switcher');\n    this.styleButton.addEventListener('click', () => {\n      this.styleButton.style.display = 'none';\n      this.mapStyleContainer.style.display = 'block';\n    });\n    document.addEventListener('click', this.onDocumentClick);\n    this.controlContainer.appendChild(this.styleButton);\n    this.controlContainer.appendChild(this.mapStyleContainer);\n    return this.controlContainer;\n  }\n\n  onRemove() {\n    if (!this.controlContainer || !this.controlContainer.parentNode || !this.map || !this.styleButton) {\n      return;\n    }\n    this.styleButton.removeEventListener('click', this.onDocumentClick);\n    this.controlContainer.parentNode.removeChild(this.controlContainer);\n    document.removeEventListener('click', this.onDocumentClick);\n    this.map = undefined;\n  }\n\n  onDocumentClick(event) {\n    if (this.controlContainer && !this.controlContainer.contains(event.target) && this.mapStyleContainer && this.styleButton) {\n      this.mapStyleContainer.style.display = 'none';\n      this.styleButton.style.display = 'block';\n    }\n  }\n}\n","export const deviceCategories = [\n  'default',\n  'animal',\n  'bicycle',\n  'boat',\n  'bus',\n  'car',\n  'crane',\n  'helicopter',\n  'motorcycle',\n  'offroad',\n  'person',\n  'pickup',\n  'plane',\n  'ship',\n  'tractor',\n  'train',\n  'tram',\n  'trolleybus',\n  'truck',\n  'van',\n  'scooter',\n];\n","export const loadImage = (url) => {\n  return new Promise(imageLoaded => {\n    const image = new Image();\n    image.onload = () => imageLoaded(image);\n    image.src = url;\n  });\n};\n\nexport const loadIcon = async (key, background, url) => {\n  const image = await loadImage(url);\n  const pixelRatio = window.devicePixelRatio;\n\n  const canvas = document.createElement('canvas');\n  canvas.width = background.width * pixelRatio;\n  canvas.height = background.height * pixelRatio;\n  canvas.style.width = `${background.width}px`;\n  canvas.style.height = `${background.height}px`;\n\n  const context = canvas.getContext('2d');\n  context.drawImage(background, 0, 0, canvas.width, canvas.height);\n\n  const iconRatio = 0.5;\n  const imageWidth = canvas.width * iconRatio;\n  const imageHeight = canvas.height * iconRatio;\n  context.drawImage(image, (canvas.width - imageWidth) / 2, (canvas.height - imageHeight) / 2, imageWidth, imageHeight);\n\n  return context.getImageData(0, 0, canvas.width, canvas.height);\n};\n\nexport const reverseCoordinates = it => {\n  if (!it) {\n    return it;\n  } else if (Array.isArray(it)) {\n    if (it.length === 2 && !Number.isNaN(it[0]) && !Number.isNaN(it[1])) {\n      return [it[1], it[0]];\n    } else {\n      return it.map(it => reverseCoordinates(it));\n    }\n  } else {\n    return {\n      ...it,\n      coordinates: reverseCoordinates(it.coordinates),\n    }\n  }\n}\n","export const styleCustom = (url, attribution) => ({\n  version: 8,\n  sources: {\n    osm: {\n      type: 'raster',\n      tiles: [url],\n      attribution: attribution,\n    },\n  },\n  glyphs: 'https://cdn.traccar.com/map/fonts/{fontstack}/{range}.pbf',\n  layers: [{\n    id: 'osm',\n    type: 'raster',\n    source: 'osm',\n  }],\n});\n\nexport const styleOsm = () => styleCustom(\n  'https://tile.openstreetmap.org/{z}/{x}/{y}.png',\n  '© <a target=\"_top\" rel=\"noopener\" href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n);\n\nexport const styleCarto = () => ({\n  'version': 8,\n  'sources': {\n    'raster-tiles': {\n      'type': 'raster',\n      'tiles': [\n          'https://a.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png',\n          'https://b.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png',\n          'https://c.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png',\n          'https://d.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png'\n      ],\n      'tileSize': 256,\n      'attribution': '© <a target=\"_top\" rel=\"noopener\" href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, © <a target=\"_top\" rel=\"noopener\" href=\"https://carto.com/attribution\">CARTO</a>'\n    }\n  },\n  'glyphs': 'https://cdn.traccar.com/map/fonts/{fontstack}/{range}.pbf',\n  'layers': [\n    {\n      'id': 'simple-tiles',\n      'type': 'raster',\n      'source': 'raster-tiles',\n      'minzoom': 0,\n      'maxzoom': 22,\n    }\n  ]\n});\n\nexport const styleMapbox = (style) => `mapbox://styles/mapbox/${style}`;\n\nexport const styleMapTiler = (style, key) => `https://api.maptiler.com/maps/${style}/style.json?key=${key}`;\n","import { useSelector } from 'react-redux';\n\nexport const usePreference = (key, defaultValue) => {\n  return useSelector(state => {\n    if (state.session.server.forceSettings) {\n      return state.session.server[key] || state.session.user[key] || defaultValue;\n    } else {\n      return state.session.user[key] || state.session.server[key] || defaultValue;\n    }\n  });\n};\n\nexport const useAttributePreference = (key, defaultValue) => {\n  return useSelector(state => {\n    if (state.session.server.forceSettings) {\n      return state.session.server.attributes[key] || state.session.user.attributes[key] || defaultValue;\n    } else {\n      return state.session.user.attributes[key] || state.session.server.attributes[key] || defaultValue;\n    }\n  });\n};\n","import 'mapbox-gl/dist/mapbox-gl.css';\nimport './switcher/switcher.css';\nimport mapboxgl from 'mapbox-gl';\nimport { SwitcherControl } from './switcher/switcher';\nimport React, { useRef, useLayoutEffect, useEffect, useState } from 'react';\nimport { deviceCategories } from '../common/deviceCategories';\nimport { loadIcon, loadImage } from './mapUtil';\nimport { styleCarto, styleMapbox, styleOsm } from './mapStyles';\nimport t from '../common/localization';\nimport { useAttributePreference } from '../common/preferences';\n\nconst element = document.createElement('div');\nelement.style.width = '100%';\nelement.style.height = '100%';\n\nexport const map = new mapboxgl.Map({\n  container: element,\n  style: styleOsm(),\n});\n\nlet ready = false;\nconst readyListeners = new Set();\nconsole.log(\"Aqui\")\nconst addReadyListener = listener => {\n  readyListeners.add(listener);\n  listener(ready);\n};\n\nconst removeReadyListener = listener => {\n  readyListeners.delete(listener);\n};\n\nconst updateReadyValue = value => {\n  ready = value;\n  readyListeners.forEach(listener => listener(value));\n};\n\nconst initMap = async () => {\n  const background = await loadImage('images/background.svg');\n  await Promise.all(deviceCategories.map(async category => {\n    if (!map.hasImage(category)) {\n      const imageData = await loadIcon(category, background, `images/icon/${category}.svg`);\n      map.addImage(category, imageData, { pixelRatio: window.devicePixelRatio });\n    }\n  }));\n  updateReadyValue(true);\n};\n\nmap.on('load', initMap);\n\nmap.addControl(new mapboxgl.NavigationControl({\n  showCompass: false,\n}));\n\nmap.addControl(new SwitcherControl(\n  [\n    { title: t('mapOsm'), uri: styleOsm() },\n    { title: t('mapCarto'), uri: styleCarto() },\n    { title: t('mapMapboxStreets'), uri: styleMapbox('streets-v11') },\n    { title: t('mapMapboxOutdoors'), uri: styleMapbox('outdoors-v11') },\n    { title: t('mapMapboxSatellite'), uri: styleMapbox('satellite-v9') },\n  ],\n  t('mapOsm'),\n  () => updateReadyValue(false),\n  () => {\n    const waiting = () => {\n      if (!map.loaded()) {\n        setTimeout(waiting, 100);\n      } else {\n        initMap();\n      }\n    };\n    waiting();\n  },\n));\n\nconst Map = ({ children }) => {\n  const containerEl = useRef(null);\n\n  const [mapReady, setMapReady] = useState(false);\n\n  const mapboxAccessToken = useAttributePreference('pk.eyJ1IjoiYmFpeGVtYW5pYSIsImEiOiJja2h2ZWM3cmkwaGt1MnNudGhraXFvdTF1In0.cnbxrfidT7QwOI-bBWm5ww');\n\n  useEffect(() => {\n    mapboxgl.accessToken = mapboxAccessToken;\n  }, [mapboxAccessToken]);\n\n  useEffect(() => {\n    const listener = ready => setMapReady(ready);\n    addReadyListener(listener);\n    return () => {\n      removeReadyListener(listener);\n    };\n  }, []);\n\n  useLayoutEffect(() => {\n    const currentEl = containerEl.current;\n    currentEl.appendChild(element);\n    if (map) {\n      map.resize();\n    }\n    return () => {\n      currentEl.removeChild(element);\n    };\n  }, [containerEl]);\n\n  return (\n    <div style={{ width: '100%', height: '100%' }} ref={containerEl}>\n      {mapReady && children}\n    </div>\n  );\n};\n\nexport default Map;\n","import { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { map } from './Map';\n\nconst SelectedDeviceMap = () => {\n  const mapCenter = useSelector(state => {\n    if (state.devices.selectedId) {\n      const position = state.positions.items[state.devices.selectedId] || null;\n      if (position) {\n        return [position.longitude, position.latitude];\n      }\n    }\n    return null;\n  });\n\n  useEffect(() => {\n    map.easeTo({ center: mapCenter });\n  }, [mapCenter]);\n\n  return null;\n}\n\nexport default SelectedDeviceMap;\n","import { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport circle from '@turf/circle';\n\nimport { map } from './Map';\n\nconst AccuracyMap = () => {\n  const id = 'accuracy';\n\n  const positions = useSelector(state => ({\n    type: 'FeatureCollection',\n    features: Object.values(state.positions.items).filter(position => position.accuracy > 0).map(position =>\n      circle([position.longitude, position.latitude], position.accuracy * 0.001)\n    ),\n  }));\n\n  useEffect(() => {\n    map.addSource(id, {\n      'type': 'geojson',\n      'data': {\n        type: 'FeatureCollection',\n        features: []\n      }\n    });\n    map.addLayer({\n      'source': id,\n      'id': id,\n      'type': 'fill',\n      'filter': [\n         'all',\n         ['==', '$type', 'Polygon'],\n      ],\n      'paint': {\n         'fill-color':'#3bb2d0',\n         'fill-outline-color':'#3bb2d0',\n         'fill-opacity':0.25,\n      },\n    });\n\n    return () => {\n      map.removeLayer(id);\n      map.removeSource(id);\n    };\n  }, []);\n\n  useEffect(() => {\n    map.getSource(id).setData(positions);\n  }, [positions]);\n\n  return null;\n}\n\nexport default AccuracyMap;\n","import wellknown from 'wellknown';\nimport { useEffect, useState } from 'react';\n\nimport { map } from './Map';\nimport { useEffectAsync } from '../reactHelper';\nimport { reverseCoordinates } from './mapUtil';\n\nconst GeofenceMap = () => {\n  const id = 'geofences';\n\n  const [geofences, setGeofences] = useState([]);\n\n  useEffectAsync(async () => {\n    const response = await fetch('/api/geofences');\n    if (response.ok) {\n      setGeofences(await response.json());\n    }\n  }, []);\n\n  useEffect(() => {\n    map.addSource(id, {\n      'type': 'geojson',\n      'data': {\n        type: 'FeatureCollection',\n        features: []\n      }\n    });\n    map.addLayer({\n      'source': id,\n      'id': 'geofences-fill',\n      'type': 'fill',\n      'filter': [\n         'all',\n         ['==', '$type', 'Polygon'],\n      ],\n      'paint': {\n         'fill-color':'#3bb2d0',\n         'fill-outline-color':'#3bb2d0',\n         'fill-opacity':0.1,\n      },\n    });\n    map.addLayer({\n      'source': id,\n      'id': 'geofences-line',\n      'type': 'line',\n      'paint': {\n         'line-color': '#3bb2d0',\n         'line-width': 2,\n      },\n    });\n    map.addLayer({\n      'source': id,\n      'id': 'geofences-title',\n      'type': 'symbol',\n      'layout': {\n        'text-field': '{name}',\n        'text-font': ['Roboto Regular'],\n        'text-size': 12,\n      },\n      'paint': {\n        'text-halo-color': 'white',\n        'text-halo-width': 1,\n      },\n    });\n\n    return () => {\n      map.removeLayer('geofences-fill');\n      map.removeLayer('geofences-line');\n      map.removeLayer('geofences-title');\n      map.removeSource(id);\n    };\n  }, []);\n\n  useEffect(() => {\n    map.getSource(id).setData({\n      type: 'FeatureCollection',\n      features: geofences.map(item => [item.name, reverseCoordinates(wellknown(item.area))]).filter(([, geometry]) => !!geometry).map(([name, geometry]) => ({\n        type: 'Feature',\n        geometry: geometry,\n        properties: { name },\n      })),\n    });\n  }, [geofences]);\n\n  return null;\n}\n\nexport default GeofenceMap;\n","import moment from 'moment';\nimport t from '../common/localization';\n\nexport const formatPosition = (value, key) => {\n  if (value != null && typeof value === 'object') {\n    value = value[key];\n  }\n  switch (key) {\n    case 'fixTime':\n    case 'deviceTime':\n    case 'serverTime':\n      return moment(value).format('LLL');\n    case 'latitude':\n    case 'longitude':\n      return value.toFixed(5);\n    case 'speed':\n    case 'course':\n      return value.toFixed(1);\n    case 'batteryLevel':\n      return value + '%';\n    default:\n      if (typeof value === 'number') {\n        return formatNumber(value);\n      } else if (typeof value === 'boolean') {\n        return formatBoolean(value);\n      } else {\n        return value;\n      }\n  }\n};\n\nexport const formatBoolean = (value) => {\n  return value ? t('sharedYes') : t('sharedNo');\n};\n\nexport const formatNumber = (value, precision = 1) => {\n  return Number(value.toFixed(precision));\n};\n\nexport const formatDate = (value, format = 'YYYY-MM-DD HH:mm') => {\n  return moment(value).format(format);\n};\n\nexport const formatDistance = (value, unit) => {\n  switch (unit) {\n    case 'mi':\n      return `${(value * 0.000621371).toFixed(2)} ${t('sharedMi')}`;\n    case 'nmi':\n      return `${(value * 0.000539957).toFixed(2)} ${t('sharedNmi')}`;\n    case 'km':\n    default:\n        return `${(value * 0.001).toFixed(2)} ${t('sharedKm')}`;\n  }\n};\n\nexport const formatSpeed = (value, unit) => {\n  switch (unit) {\n    case 'kmh':\n      return `${(value * 1.852).toFixed(2)} ${t('sharedKmh')}`;\n    case 'mph':\n      return `${(value * 1.15078).toFixed(2)} ${t('sharedMph')}`;\n    case 'kn':\n    default:\n        return `${(value * 1).toFixed(2)} ${t('sharedKn')}`;\n  }  \n};\n\nexport const formatVolume = (value, unit) => {\n  switch (unit) {\n    case 'impGal':\n      return `${(value / 4.546).toFixed(2)} ${t('sharedGallonAbbreviation')}`;\n    case 'usGal':\n      return `${(value / 3.785).toFixed(2)} ${t('sharedGallonAbbreviation')}`;\n    case 'ltr':\n    default:\n        return `${(value / 1).toFixed(2)} ${t('sharedLiterAbbreviation')}`;\n  }  \n}\n\nexport const formatHours = (value) => {\n  return moment.duration(value).humanize();\n};\n","import t from '../common/localization'\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { formatPosition } from '../common/formatter';\n\nconst StatusView = ({ deviceId, onShowDetails }) => {\n  const device = useSelector(state => state.devices.items[deviceId]);\n  const position = useSelector(state => state.positions.items[deviceId]);\n\n  const handleClick = e => {\n    e.preventDefault();\n    onShowDetails(position.id);\n    \n  };\n\n  return (\n    <>\n      <b>{t('deviceStatus')}:</b> {formatPosition(device.status, 'status')}<br />\n      <b>{t('deviceDate')}:</b> {formatPosition(device.serverTime, 'serverTime')}<br />\n      <b>{t('deviceIgnition')}:</b> {formatPosition(position.attributes.ignition, 'ignition')}<br />\n      <b>{t('positionSpeed')}:</b> {formatPosition(position.speed, 'speed')}<br />\n      <b>{t('deviceMotion')}:</b> {formatPosition(position.attributes.motion, 'motion')}<br />\n      <b>{t('sharedAddress')}:</b> {formatPosition(position.address, 'adress')}<br />\n      {/* <b>{t('positionCourse')}:</b> {formatPosition(position.course, 'course')}<br /> */}\n      {/* <b>{t('positionDistance')}:</b> {formatPosition(position.attributes.totalDistance, 'distance')}<br /> */}\n      {position.attributes.batteryLevel &&\n        <><b>{t('positionBattery')}:</b> {formatPosition(position.attributes.batteryLevel, 'batteryLevel')}<br /></>\n      }\n      <a href=\"/\" onClick={handleClick}>{t('sharedShowDetails')}</a>\n    </>\n  );\n};\n\nexport default StatusView;\n","import React, { useCallback, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport mapboxgl from 'mapbox-gl';\nimport { Provider, useSelector } from 'react-redux';\n\nimport { map } from './Map';\nimport store from '../store';\nimport { useHistory } from 'react-router-dom';\nimport StatusView from './StatusView';\n\nconst PositionsMap = ({ positions }) => {\n  const id = 'positions';\n\n  const history = useHistory();\n  const devices = useSelector(state => state.devices.items);\n\n  const createFeature = (devices, position) => {\n    const device = devices[position.deviceId] || null;\n    return {\n      deviceId: position.deviceId,\n      name: device ? device.name : '',\n      category: device && (device.category || 'default'),\n    }\n  };\n\n  const onMouseEnter = () => map.getCanvas().style.cursor = 'pointer';\n  const onMouseLeave = () => map.getCanvas().style.cursor = '';\n\n  const onClickCallback = useCallback(event => {\n    const feature = event.features[0];\n    let coordinates = feature.geometry.coordinates.slice();\n    while (Math.abs(event.lngLat.lng - coordinates[0]) > 180) {\n      coordinates[0] += event.lngLat.lng > coordinates[0] ? 360 : -360;\n    }\n\n    const placeholder = document.createElement('div');\n    ReactDOM.render(\n      <Provider store={store}>\n        <StatusView deviceId={feature.properties.deviceId} onShowDetails={positionId => history.push(`/position/${positionId}`)} />\n      </Provider>,\n      placeholder\n    );\n\n    new mapboxgl.Popup({\n      offset: 25,\n      anchor: 'top'\n    })\n      .setDOMContent(placeholder)\n      .setLngLat(coordinates)\n      .addTo(map);\n  }, [history]);\n\n  useEffect(() => {\n    map.addSource(id, {\n      'type': 'geojson',\n      'data': {\n        type: 'FeatureCollection',\n        features: [],\n      }\n    });\n    map.addLayer({\n      'id': id,\n      'type': 'symbol',\n      'source': id,\n      'layout': {\n        'icon-image': '{category}',\n        'icon-allow-overlap': true,\n        'text-field': '{name}',\n        'text-allow-overlap': true,\n        'text-anchor': 'bottom',\n        'text-offset': [0, -2],\n        'text-font': ['Roboto Regular'],\n        'text-size': 12,\n      },\n      'paint': {\n        'text-halo-color': 'white',\n        'text-halo-width': 1,\n      },\n    });\n\n    map.on('mouseenter', id, onMouseEnter);\n    map.on('mouseleave', id, onMouseLeave);\n    map.on('click', id, onClickCallback);\n\n    return () => {\n      Array.from(map.getContainer().getElementsByClassName('mapboxgl-popup')).forEach(el => el.remove());\n\n      map.off('mouseenter', id, onMouseEnter);\n      map.off('mouseleave', id, onMouseLeave);\n      map.off('click', id, onClickCallback);\n\n      map.removeLayer(id);\n      map.removeSource(id);\n    };\n  }, [onClickCallback]);\n\n  useEffect(() => {\n    map.getSource(id).setData({\n      type: 'FeatureCollection',\n      features: positions.map(position => ({\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: [position.longitude, position.latitude],\n        },\n        properties: createFeature(devices, position),\n      }))\n    });\n  }, [devices, positions]);\n\n  return null;\n}\n\nexport default PositionsMap;\n","import React, {  } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport PositionsMap from './PositionsMap';\n\nconst CurrentPositionsMap = () => {\n  const positions = useSelector(state => Object.values(state.positions.items));\n  return (<PositionsMap positions={positions} />);\n}\n\nexport default CurrentPositionsMap;\n","import mapboxgl from 'mapbox-gl';\nimport { useEffect } from 'react';\nimport { map } from './Map';\n\nconst CurrentLocationMap = () => {\n  useEffect(() => {\n    const control = new mapboxgl.GeolocateControl({\n      positionOptions: {\n        enableHighAccuracy: true,\n        timeout: 5000,\n      },\n      trackUserLocation: true,\n    });\n    map.addControl(control);\n    return () => map.removeControl(control);\n  }, []);\n\n  return null;\n}\n\nexport default CurrentLocationMap;\n","import React from 'react';\nimport { isWidthUp, makeStyles, withWidth } from '@material-ui/core';\nimport Drawer from '@material-ui/core/Drawer';\nimport ContainerDimensions from 'react-container-dimensions';\nimport DevicesList from './DevicesList';\nimport MainToolbar from './MainToolbar';\nimport Map from './map/Map';\nimport SelectedDeviceMap from './map/SelectedDeviceMap';\nimport AccuracyMap from './map/AccuracyMap';\nimport GeofenceMap from './map/GeofenceMap';\nimport CurrentPositionsMap from './map/CurrentPositionsMap';\nimport CurrentLocationMap from './map/CurrentLocationMap';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  content: {\n    flexGrow: 1,\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'row',\n    [theme.breakpoints.down('xs')]: {\n      flexDirection: 'column-reverse',\n    }\n  },\n  drawerPaper: {\n    position: 'relative',\n    [theme.breakpoints.up('sm')]: {\n      width: 350,\n    },\n    [theme.breakpoints.down('xs')]: {\n      height: 250,\n    }\n  },\n  mapContainer: {\n    flexGrow: 1,\n  },\n}));\n\nconst MainPage = ({ width }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <MainToolbar />\n      <div className={classes.content}>\n        <Drawer\n          anchor={isWidthUp('sm', width) ? 'left' : 'bottom'}\n          variant='permanent'\n          classes={{ paper: classes.drawerPaper }}>\n          <DevicesList />\n        </Drawer>\n        <div className={classes.mapContainer}>\n          <ContainerDimensions>\n            <Map>\n              <CurrentLocationMap />\n              <GeofenceMap />\n              <AccuracyMap />\n              <CurrentPositionsMap />\n              <SelectedDeviceMap />\n            </Map>\n          </ContainerDimensions>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default withWidth()(MainPage);\n","import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { sessionActions } from './store';\nimport Button from '@material-ui/core/Button';\nimport FormControl from '@material-ui/core/FormControl';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\n\nimport t from './common/localization';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: 'auto',\n    marginLeft: theme.spacing(3),\n    marginRight: theme.spacing(3),\n    [theme.breakpoints.up(400 + theme.spacing(3 * 2))]: {\n      width: 400,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n    },\n  },\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    padding: theme.spacing(3),\n  },\n  logo: {\n    marginTop: theme.spacing(2)\n  },\n  buttons: {\n    marginTop: theme.spacing(1),\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    '& > *': {\n      flexBasis: '40%',\n    },\n  },\n}));\n\nconst LoginPage = () => {\n  const dispatch = useDispatch();\n\n  const [failed, setFailed] = useState(false);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const classes = useStyles();\n  const history = useHistory();\n\n  const handleEmailChange = (event) => {\n    setEmail(event.target.value);\n  }\n\n  const handlePasswordChange = (event) => {\n    setPassword(event.target.value);\n  }\n\n  const handleRegister = () => {\n    // TODO: Implement registration\n  }\n\n  const handleLogin = async (event) => {\n    event.preventDefault();\n    const response = await fetch('/api/session', { method: 'POST', body: new URLSearchParams(`email=${email}&password=${password}`) });\n    if (response.ok) {\n      const user = await response.json();\n      dispatch(sessionActions.updateUser(user));\n      history.push('/');\n    } else {\n      setFailed(true);\n      setPassword('');\n    }\n  }\n\n  return (\n    <main className={classes.root}>\n      <Paper className={classes.paper}>\n        <img className={classes.logo} src='/logo.svg' alt='Traccar' />\n        <form onSubmit={handleLogin}>\n\n          <TextField\n            margin='normal'\n            required\n            fullWidth\n            error={failed}\n            label={t('userEmail')}\n            name='email'\n            value={email}\n            autoComplete='email'\n            autoFocus\n            onChange={handleEmailChange}\n            helperText={failed && 'Invalid username or password'} />\n\n          <TextField\n            margin='normal'\n            required\n            fullWidth\n            error={failed}\n            label={t('userPassword')}\n            name='password'\n            value={password}\n            type='password'\n            autoComplete='current-password'\n            onChange={handlePasswordChange} />\n\n          <FormControl fullWidth margin='normal'>\n            <div className={classes.buttons}>\n              {/* <Button type='button' variant='contained' disabled onClick={handleRegister}>\n                {t('loginRegister')}\n              </Button> */}\n              <Button type='submit' variant='contained' color='primary' disabled={!email || !password}>\n                {t('loginLogin')}\n              </Button>\n            </div>\n          </FormControl>\n        </form>\n      </Paper>\n    </main>\n  );\n}\n\nexport default LoginPage;\n","import React, { useState } from 'react';\nimport { FormControl, InputLabel, Select, MenuItem, Button, TextField, ButtonGroup } from '@material-ui/core';\nimport t from '../common/localization';\nimport { useSelector } from 'react-redux';\nimport moment from 'moment';\n\nconst ReportFilter = ({ children, handleSubmit, showOnly }) => {\n  const devices = useSelector(state => Object.values(state.devices.items));\n  const [deviceId, setDeviceId] = useState();\n  const [period, setPeriod] = useState('today');\n  const [from, setFrom] = useState(moment().subtract(1, 'hour'));\n  const [to, setTo] = useState(moment());\n\n  const handleClick = (mail, json) => {\n    let selectedFrom;\n    let selectedTo;\n    switch (period) {\n      case 'today':\n        selectedFrom = moment().startOf('day');\n        selectedTo = moment().endOf('day');\n        break;\n      case 'yesterday':\n        selectedFrom = moment().subtract(1, 'day').startOf('day');\n        selectedTo = moment().subtract(1, 'day').endOf('day');\n        break;\n      case 'thisWeek':\n        selectedFrom = moment().startOf('week');\n        selectedTo = moment().endOf('week');\n        break;\n      case 'previousWeek':\n        selectedFrom = moment().subtract(1, 'week').startOf('week');\n        selectedTo = moment().subtract(1, 'week').endOf('week');\n        break;\n      case 'thisMonth':\n        selectedFrom = moment().startOf('month');\n        selectedTo = moment().endOf('month');\n        break;\n      case 'previousMonth':\n        selectedFrom = moment().subtract(1, 'month').startOf('month');\n        selectedTo = moment().subtract(1, 'month').endOf('month');\n        break;\n      default:\n        selectedFrom = from;\n        selectedTo = to;\n        break;\n    }\n\n    const accept = json ? 'application/json' : 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\n    handleSubmit(\n      deviceId,\n      selectedFrom.toISOString(),\n      selectedTo.toISOString(),\n      mail,\n      { Accept: accept }\n    );\n  }\n\n  return (\n    <>\n      <FormControl variant=\"filled\" margin=\"normal\" fullWidth>\n        <InputLabel>{t('reportDevice')}</InputLabel>\n        <Select value={deviceId} onChange={(e) => setDeviceId(e.target.value)}>\n          {devices.map((device) => (\n            <MenuItem value={device.id}>{device.name}</MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n      <FormControl variant=\"filled\" margin=\"normal\" fullWidth>\n        <InputLabel>{t('reportPeriod')}</InputLabel>\n        <Select value={period} onChange={(e) => setPeriod(e.target.value)}>\n          <MenuItem value=\"today\">{t('reportToday')}</MenuItem>\n          <MenuItem value=\"yesterday\">{t('reportYesterday')}</MenuItem>\n          <MenuItem value=\"thisWeek\">{t('reportThisWeek')}</MenuItem>\n          <MenuItem value=\"previousWeek\">{t('reportPreviousWeek')}</MenuItem>\n          <MenuItem value=\"thisMonth\">{t('reportThisMonth')}</MenuItem>\n          <MenuItem value=\"previousMonth\">{t('reportPreviousMonth')}</MenuItem>\n          <MenuItem value=\"custom\">{t('reportCustom')}</MenuItem>\n        </Select>\n      </FormControl>\n      {period === 'custom' && (\n        <TextField\n          margin=\"normal\"\n          variant=\"filled\"\n          label={t('reportFrom')}\n          type=\"datetime-local\"\n          value={from.format(moment.HTML5_FMT.DATETIME_LOCAL)}\n          onChange={e => setFrom(moment(e.target.value, moment.HTML5_FMT.DATETIME_LOCAL))}\n          fullWidth />\n      )}\n      {period === 'custom' && (\n        <TextField\n          margin=\"normal\"\n          variant=\"filled\"\n          label={t('reportTo')}\n          type=\"datetime-local\"\n          value={to.format(moment.HTML5_FMT.DATETIME_LOCAL)}\n          onChange={e => setTo(moment(e.target.value, moment.HTML5_FMT.DATETIME_LOCAL))}\n          fullWidth />\n      )}\n      {children}\n      <FormControl margin=\"normal\" fullWidth>\n        <ButtonGroup color=\"primary\" orientation=\"vertical\" disabled={!deviceId}>\n          <Button onClick={() => handleClick(false, true)}>{t('reportShow')}</Button>\n          {!showOnly && <Button onClick={() => handleClick(false, false)}>{t('reportExport')}</Button>}\n          {!showOnly && <Button onClick={() => handleClick(true, false)}>{t('reportEmail')}</Button>}\n        </ButtonGroup>\n      </FormControl>\n    </>\n  );\n}\n\nexport default ReportFilter;\n","import React from 'react';\nimport { Grid, Paper, makeStyles } from '@material-ui/core';\nimport MainToolbar from '../MainToolbar';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  content: {\n    flex: 1,\n    overflow: 'auto',\n    padding: theme.spacing(2),\n  },\n  form: {\n    padding: theme.spacing(1, 2, 2),\n  },\n}));\n\nconst ReportLayoutPage = ({ reportFilterForm:ReportFilterForm, setItems, children }) => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <MainToolbar />\n      <div className={classes.content}>\n        <Grid container spacing={2}>\n          <Grid item xs={12} md={3} lg={2}>\n            <Paper className={classes.form}>\n              <ReportFilterForm setItems={ setItems } />\n            </Paper>\n          </Grid>\n          <Grid item xs={12} md={9} lg={10}>\n            {children}\n          </Grid>\n        </Grid>\n      </div>\n    </div>\n  );\n}\n\nexport default ReportLayoutPage;\n","import React, { useState } from 'react';\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, Paper } from '@material-ui/core';\nimport t from '../common/localization';\nimport { formatPosition } from '../common/formatter';\nimport ReportFilter from './ReportFilter';\nimport ReportLayoutPage from './ReportLayoutPage';\n\nconst ReportFilterForm = ({ setItems }) => {\n\n  const handleSubmit = async (deviceId, from, to, mail, headers) => {\n    const query = new URLSearchParams({ deviceId, from, to, mail });\n    const response = await fetch(`/api/reports/route?${query.toString()}`, { headers });\n    if (response.ok) {\n      const contentType = response.headers.get('content-type');\n      if (contentType) {\n        if (contentType === 'application/json') {\n          setItems(await response.json());\n        } else {\n          window.location.assign(window.URL.createObjectURL(await response.blob()));\n        }\n      }\n    }\n  }\n\n  return <ReportFilter handleSubmit={handleSubmit} />;\n};\n\nconst RouteReportPage = () => {\n\n  const [items, setItems] = useState([]);\n\n  return (\n    <ReportLayoutPage reportFilterForm={ReportFilterForm} setItems={setItems}>\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>{t('positionFixTime')}</TableCell>\n              <TableCell>{t('positionLatitude')}</TableCell>\n              <TableCell>{t('positionLongitude')}</TableCell>\n              <TableCell>{t('positionSpeed')}</TableCell>\n              <TableCell>{t('positionAddress')}</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {items.map((item) => (\n              <TableRow key={item.id}>\n                <TableCell>{formatPosition(item, 'fixTime')}</TableCell>\n                <TableCell>{formatPosition(item, 'latitude')}</TableCell>\n                <TableCell>{formatPosition(item, 'longitude')}</TableCell>\n                <TableCell>{formatPosition(item, 'speed')}</TableCell>\n                <TableCell>{formatPosition(item, 'address')}</TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </ReportLayoutPage>\n  );\n};\n\nexport default RouteReportPage;\n","import React, { useState } from 'react';\nimport { Button, Dialog, DialogActions, DialogContent, FormControl, InputLabel, MenuItem, Select, TextField } from \"@material-ui/core\";\n\nimport t from '../common/localization';\nimport { Autocomplete, createFilterOptions } from '@material-ui/lab';\n\nconst AddAttributeDialog = ({ open, onResult, definitions }) => {\n  const filter = createFilterOptions({\n    stringify: option => option.name,\n  });\n\n  const options = Object.entries(definitions).map(([key, value]) => ({\n    key,\n    name: value.name,\n    type: value.type,\n  }));\n\n  const [key, setKey] = useState();\n  const [type, setType] = useState('string');\n\n  return (\n    <Dialog open={open} fullWidth maxWidth=\"xs\">\n      <DialogContent>\n        <Autocomplete\n          onChange={(_, option) => {\n            setKey(option && typeof option === 'object' ? option.key : option);\n            if (option && option.type) {\n              setType(option.type);\n            }\n          }}\n          filterOptions={(options, params) => {\n            const filtered = filter(options, params);\n            if (params.inputValue) {\n              filtered.push({\n                key: params.inputValue,\n                name: params.inputValue,\n              });\n            }\n            return filtered;\n          }}\n          options={options}\n          getOptionLabel={option => {\n            return option && typeof option === 'object' ? option.name : option;\n          }}\n          renderOption={option => option.name}\n          freeSolo\n          renderInput={(params) => (\n            <TextField {...params} label={t('sharedAttribute')} variant=\"filled\" margin=\"normal\" />\n          )}\n        />\n        <FormControl\n          variant=\"filled\"\n          margin=\"normal\"\n          fullWidth\n          disabled={key in definitions}>\n          <InputLabel>{t('sharedType')}</InputLabel>\n          <Select\n            value={type}\n            onChange={e => setType(e.target.value)}>\n            <MenuItem value={'string'}>{t('sharedTypeString')}</MenuItem>\n            <MenuItem value={'number'}>{t('sharedTypeNumber')}</MenuItem>\n            <MenuItem value={'boolean'}>{t('sharedTypeBoolean')}</MenuItem>\n          </Select>\n        </FormControl>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          color=\"primary\"\n          disabled={!key}\n          onClick={() => onResult({ key, type })}>\n          {t('sharedAdd')}\n        </Button>\n        <Button\n          autoFocus\n          onClick={() => onResult(null)}>\n          {t('sharedCancel')}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default AddAttributeDialog;\n","import React, { useState } from 'react';\n\nimport t from '../common/localization';\n\nimport { Button, Checkbox, FilledInput, FormControl, FormControlLabel, Grid, IconButton, InputAdornment, InputLabel, makeStyles } from \"@material-ui/core\";\nimport CloseIcon from '@material-ui/icons/Close';\nimport AddIcon from '@material-ui/icons/Add';\nimport AddAttributeDialog from './AddAttributeDialog';\n\nconst useStyles = makeStyles(theme => ({\n  addButton: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(1),\n  },\n  removeButton: {\n    marginRight: theme.spacing(1.5),\n  },\n}));\n\nconst EditAttributesView = ({ attributes, setAttributes, definitions }) => {\n  const classes = useStyles();\n\n  const [addDialogShown, setAddDialogShown] = useState(false);\n\n  const convertToList = (attributes) => {\n    let booleanList = [];\n    let otherList = [];\n    for (const key in attributes) {\n      const value = attributes[key];\n      const type = getAttributeType(value);\n      if (type === 'boolean') {\n        booleanList.push({ key, value, type });\n      } else {\n        otherList.push({ key, value, type });\n      }\n    }\n    return otherList.concat(booleanList);\n  }\n\n  const handleAddResult = (definition) => {\n    setAddDialogShown(false);\n    if (definition) {\n      switch(definition.type) {\n        case 'number':\n          updateAttribute(definition.key, 0);\n          break;\n        case 'boolean':\n          updateAttribute(definition.key, false);\n          break;\n        default:\n          updateAttribute(definition.key, \"\");\n          break;\n      }\n    }\n  }\n\n  const updateAttribute = (key, value) => {\n    let updatedAttributes = {...attributes};\n    updatedAttributes[key] = value;\n    setAttributes(updatedAttributes);\n  };\n\n  const deleteAttribute = (key) => {\n    let updatedAttributes = {...attributes};\n    delete updatedAttributes[key];\n    setAttributes(updatedAttributes);\n  };\n\n  const getAttributeName = (key) => {\n    const definition = definitions[key];\n    return definition ? definition.name : key;\n  };\n\n  const getAttributeType = (value) => {\n    if (typeof value === 'number') {\n      return 'number';\n    } else if (typeof value === 'boolean') {\n      return 'boolean';\n    } else {\n      return 'string';\n    }\n  };\n\n  return (\n    <>\n      {convertToList(attributes).map(({ key, value, type }) => {\n        if (type === 'boolean') {\n          return (\n            <Grid container direction=\"row\" justify=\"space-between\">\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={value}\n                    onChange={e => updateAttribute(key, e.target.checked)}\n                    />\n                }\n                label={getAttributeName(key)} />\n              <IconButton className={classes.removeButton} onClick={() => deleteAttribute(key)}>\n                <CloseIcon />\n              </IconButton>\n            </Grid>\n          );\n        } else {\n          return (\n            <FormControl variant=\"filled\" margin=\"normal\" key={key}>\n              <InputLabel>{getAttributeName(key)}</InputLabel>\n              <FilledInput\n                type={type === 'number' ? 'number' : 'text'}\n                defaultValue={value}\n                onChange={e => updateAttribute(key, e.target.value)}\n                endAdornment={\n                  <InputAdornment position=\"end\">\n                    <IconButton onClick={() => deleteAttribute(key)}>\n                      <CloseIcon />\n                    </IconButton>\n                  </InputAdornment>\n                }\n                />\n            </FormControl>\n          );\n        }\n      })}\n      <Button\n        size=\"large\"\n        variant=\"outlined\"\n        color=\"primary\"\n        onClick={() => setAddDialogShown(true)}\n        startIcon={<AddIcon />}\n        className={classes.addButton}>\n        {t('sharedAdd')}\n      </Button>\n      <AddAttributeDialog\n        open={addDialogShown}\n        onResult={handleAddResult}\n        definitions={definitions}\n        />\n    </>\n  );\n}\n\nexport default EditAttributesView;\n","import t from '../common/localization'\n\nexport default {\n  'speedLimit': {\n    name: t('attributeSpeedLimit'),\n    type: 'string',\n  },\n  'report.ignoreOdometer': {\n    name: t('attributeReportIgnoreOdometer'),\n    type: 'boolean',\n  },\n};\n","import t from '../common/localization'\n\nexport default {\n  'notificationTokens': {\n    name: t('attributeNotificationTokens'),\n    type: 'string',\n  },\n  'web.liveRouteLength': {\n    name: t('attributeWebLiveRouteLength'),\n    type: 'number',\n  },\n  'web.selectZoom': {\n    name: t('attributeWebSelectZoom'),\n    type: 'number',\n  },\n  'web.maxZoom': {\n    name: t('attributeWebMaxZoom'),\n    type: 'number',\n  },\n  'ui.disableReport': {\n    name: t('attributeUiDisableReport'),\n    type: 'boolean',\n  },\n  'ui.disableEvents': {\n    name: t('attributeUiDisableEvents'),\n    type: 'boolean',\n  },\n  'ui.disableVehicleFetures': {\n    name: t('attributeUiDisableVehicleFetures'),\n    type: 'boolean',\n  },\n  'ui.disableDrivers': {\n    name: t('attributeUiDisableDrivers'),\n    type: 'boolean',\n  },\n  'ui.disableComputedAttributes': {\n    name: t('attributeUiDisableComputedAttributes'),\n    type: 'boolean',\n  },\n  'ui.disableCalendars': {\n    name: t('attributeUiDisableCalendars'),\n    type: 'boolean',\n  },\n  'ui.disableMaintenance': {\n    name: t('attributeUiDisableMaintenance'),\n    type: 'boolean',\n  },\n  'ui.hidePositionAttributes': {\n    name: t('attributeUiHidePositionAttributes'),\n    type: 'string',\n  },\n  'distanceUnit': {\n    name: t('settingsDistanceUnit'),\n    type: 'string',\n  },\n  'speedUnit': {\n    name: t('settingsSpeedUnit'),\n    type: 'string',\n  },\n  'volumeUnit': {\n    name: t('settingsVolumeUnit'),\n    type: 'string',\n  },\n  'timezone': {\n    name: t('sharedTimezone'),\n    type: 'string',\n  },\n};\n","import React from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nimport t from '../common/localization';\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography, Button, FormControl, Container, Checkbox, FormControlLabel } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport MainToolbar from '../MainToolbar';\nimport { sessionActions } from '../store';\nimport EditAttributesView from '../attributes/EditAttributesView';\nimport deviceAttributes from '../attributes/deviceAttributes';\nimport userAttributes from '../attributes/userAttributes';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    marginTop: theme.spacing(2),\n  },\n  buttons: {\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    '& > *': {\n      flexBasis: '33%',\n    },\n  },\n  details: {\n    flexDirection: 'column',\n  },\n}));\n\nconst ServerPage = () => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const classes = useStyles();\n\n  const item = useSelector(state => state.session.server);\n  const setItem = (updatedItem) => dispatch(sessionActions.updateServer(updatedItem));\n\n  const handleSave = async () => {\n    const response = await fetch('/api/server', {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(item),\n    });\n\n    if (response.ok) {\n      history.goBack();\n    }\n  };\n\n  return (\n    <>\n      <MainToolbar />\n      <Container maxWidth='xs' className={classes.container}>\n        {item &&\n          <>\n            <Accordion defaultExpanded>\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography variant=\"subtitle1\">\n                  {t('sharedPreferences')}\n                </Typography>\n              </AccordionSummary>\n              <AccordionDetails className={classes.details}>\n                <TextField\n                  margin=\"normal\"\n                  defaultValue={item.announcement}\n                  onChange={event => setItem({...item, announcement: event.target.value})}\n                  label={t('serverAnnouncement')}\n                  variant=\"filled\" />\n              </AccordionDetails>\n            </Accordion>\n            <Accordion>\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography variant=\"subtitle1\">\n                  {t('sharedPermissions')}\n                </Typography>\n              </AccordionSummary>\n              <AccordionDetails className={classes.details}>\n                <FormControlLabel\n                  control={<Checkbox checked={item.registration} onChange={event => setItem({...item, registration: event.target.checked})} />}\n                  label={t('serverRegistration')} />\n                <FormControlLabel\n                  control={<Checkbox checked={item.readonly} onChange={event => setItem({...item, readonly: event.target.checked})} />}\n                  label={t('serverReadonly')} />\n                <FormControlLabel\n                  control={<Checkbox checked={item.deviceReadonly} onChange={event => setItem({...item, deviceReadonly: event.target.checked})} />}\n                  label={t('userDeviceReadonly')} />\n                <FormControlLabel\n                  control={<Checkbox checked={item.limitCommands} onChange={event => setItem({...item, limitCommands: event.target.checked})} />}\n                  label={t('userLimitCommands')} />\n              </AccordionDetails>\n            </Accordion>\n            <Accordion>\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography variant=\"subtitle1\">\n                  {t('sharedAttributes')}\n                </Typography>\n              </AccordionSummary>\n              <AccordionDetails className={classes.details}>\n                <EditAttributesView\n                  attributes={item.attributes}\n                  setAttributes={attributes => setItem({...item, attributes})}\n                  definitions={{...userAttributes, ...deviceAttributes}}\n                  />\n              </AccordionDetails>\n            </Accordion>\n          </>\n        }\n        <FormControl fullWidth margin='normal'>\n          <div className={classes.buttons}>\n            <Button type='button' color='primary' variant='outlined' onClick={() => history.goBack()}>\n              {t('sharedCancel')}\n            </Button>\n            <Button type='button' color='primary' variant='contained' onClick={handleSave}>\n              {t('sharedSave')}\n            </Button>\n          </div>\n        </FormControl>\n      </Container>\n    </>\n  );\n}\n\nexport default ServerPage;\n","import React, { useState } from 'react';\nimport MainToolbar from '../MainToolbar';\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, makeStyles, IconButton } from '@material-ui/core';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport t from '../common/localization';\nimport { useEffectAsync } from '../reactHelper';\nimport EditCollectionView from '../EditCollectionView';\nimport { formatBoolean } from '../common/formatter';\n\nconst useStyles = makeStyles(theme => ({\n  columnAction: {\n    width: theme.spacing(1),\n    padding: theme.spacing(0, 1),\n  },\n}));\n\nconst UsersView = ({ updateTimestamp, onMenuClick }) => {\n  const classes = useStyles();\n\n  const [items, setItems] = useState([]);\n\n  useEffectAsync(async () => {\n    const response = await fetch('/api/users');\n    if (response.ok) {\n      setItems(await response.json());\n    }\n  }, [updateTimestamp]);\n\n  return (\n    <TableContainer>\n    <Table>\n      <TableHead>\n        <TableRow>\n          <TableCell className={classes.columnAction} />\n          <TableCell>{t('sharedName')}</TableCell>\n          <TableCell>{t('userEmail')}</TableCell>\n          <TableCell>{t('userAdmin')}</TableCell>\n          <TableCell>{t('sharedDisabled')}</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {items.map((item) => (\n          <TableRow key={item.id}>\n            <TableCell className={classes.columnAction} padding=\"none\">\n              <IconButton onClick={(event) => onMenuClick(event.currentTarget, item.id)}>\n                <MoreVertIcon />\n              </IconButton>\n            </TableCell>\n            <TableCell>{item.name}</TableCell>\n            <TableCell>{item.email}</TableCell>\n            <TableCell>{formatBoolean(item, 'administrator')}</TableCell>\n            <TableCell>{formatBoolean(item, 'disabled')}</TableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n    </TableContainer>\n  );\n}\n\nconst UsersPage = () => {\n  return (\n    <>\n      <MainToolbar />\n      <EditCollectionView content={UsersView} editPath=\"/user\" endpoint=\"users\" />\n    </>\n  );\n}\n\nexport default UsersPage;\n","import React from 'react';\nimport MainToolbar from './MainToolbar';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Button from '@material-ui/core/Button';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport t from './common/localization';\nimport { useEffectAsync } from './reactHelper';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    marginTop: theme.spacing(2),\n  },\n  buttons: {\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    '& > *': {\n      flexBasis: '33%',\n    },\n  },\n}));\n\nconst EditItemView = ({ children, endpoint, item, setItem }) => {\n  const history = useHistory();\n  const classes = useStyles();\n  const { id } = useParams();\n\n  useEffectAsync(async () => {\n    if (id) {\n      const response = await fetch(`/api/${endpoint}/${id}`);\n      if (response.ok) {\n        setItem(await response.json());\n      }\n    } else {\n      setItem({});\n    }\n  }, [id]);\n\n  const handleSave = async () => {\n    let url = `/api/${endpoint}`;\n    if (id) {\n      url += `/${id}`;\n    }\n\n    const response = await fetch(url, {\n      method: !id ? 'POST' : 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(item),\n    });\n\n    if (response.ok) {\n      history.goBack();\n    }\n  };\n\n  return (\n    <>\n      <MainToolbar />\n      <Container maxWidth='xs' className={classes.container}>\n        {children}\n        <FormControl fullWidth margin='normal'>\n          <div className={classes.buttons}>\n            <Button type='button' color='primary' variant='outlined' onClick={() => history.goBack()}>\n              {t('sharedCancel')}\n            </Button>\n            <Button type='button' color='primary' variant='contained' onClick={handleSave}>\n              {t('sharedSave')}\n            </Button>\n          </div>\n        </FormControl>\n      </Container>\n    </>\n  );\n}\n\nexport default EditItemView;\n","import { FormControl, InputLabel, MenuItem, Select } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { useEffectAsync } from '../reactHelper';\n\nconst SelectField = ({\n  margin,\n  variant,\n  label,\n  multiple,\n  defaultValue,\n  onChange,\n  endpoint,\n  data,\n  keyGetter = item => item.id,\n  titleGetter = item => item.name,\n}) => {\n  const [items, setItems] = useState(data);\n\n  useEffectAsync(async () => {\n    if (endpoint) {\n      const response = await fetch(endpoint);\n      if (response.ok) {\n        setItems(await response.json());\n      }\n    }\n  }, []);\n\n  if (items) {\n    return (\n      <FormControl margin={margin} variant={variant}>\n        <InputLabel>{label}</InputLabel>\n        <Select\n          multiple={multiple}\n          defaultValue={defaultValue}\n          onChange={onChange}>\n          {!multiple &&\n            <MenuItem value={0}>&nbsp;</MenuItem>\n          }\n          {items.map(item => (\n            <MenuItem key={keyGetter(item)} value={keyGetter(item)}>{titleGetter(item)}</MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n    );\n  } else {\n    return null;\n  }\n}\n\nexport default SelectField;\n","import { FormControl, InputLabel, MenuItem, Select } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { useEffectAsync } from '../reactHelper';\n\nconst LinkField = ({\n  margin,\n  variant,\n  label,\n  endpointAll,\n  endpointLinked,\n  baseId,\n  keyBase,\n  keyLink,\n  keyGetter = item => item.id,\n  titleGetter = item => item.name,\n}) => {\n  const [items, setItems] = useState();\n  const [linked, setLinked] = useState();\n\n  useEffectAsync(async () => {\n    const response = await fetch(endpointAll);\n    if (response.ok) {\n      setItems(await response.json());\n    }\n  }, []);\n\n  useEffectAsync(async () => {\n    const response = await fetch(endpointLinked);\n    if (response.ok) {\n      const data = await response.json();\n      setLinked(data.map(it => it.id));\n    }\n  }, []);\n\n  const createBody = linkId => {\n    const body = {};\n    body[keyBase] = baseId;\n    body[keyLink] = linkId;\n    return body;\n  }\n\n  const onChange = async event => {\n    const oldValue = linked;\n    const newValue = event.target.value;\n    for (const added of newValue.filter(it => !oldValue.includes(it))) {\n      await fetch('/api/permissions', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(createBody(added)),\n      });\n    }\n    for (const removed of oldValue.filter(it => !newValue.includes(it))) {\n      await fetch('/api/permissions', {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(createBody(removed)),\n      });\n    }\n    setLinked(newValue);\n  };\n\n  if (items && linked) {\n    return (\n      <FormControl margin={margin} variant={variant}>\n        <InputLabel>{label}</InputLabel>\n        <Select\n          multiple\n          value={linked}\n          onChange={onChange}>\n          {items.map(item => (\n            <MenuItem key={keyGetter(item)} value={keyGetter(item)}>{titleGetter(item)}</MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n    );\n  } else {\n    return null;\n  }\n}\n\nexport default LinkField;\n","export const prefixString = (prefix, value) => {\n  return prefix + value.charAt(0).toUpperCase() + value.slice(1);\n}\n\nexport const unprefixString = (prefix, value) => {\n  return value.charAt(prefix.length).toLowerCase() + value.slice(prefix.length + 1);\n}\n","import React, { useState } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nimport t from './common/localization';\nimport EditItemView from './EditItemView';\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography, FormControlLabel, Checkbox } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport EditAttributesView from './attributes/EditAttributesView';\nimport deviceAttributes from './attributes/deviceAttributes';\nimport SelectField from './form/SelectField';\nimport { deviceCategories } from './common/deviceCategories';\nimport LinkField from './form/LinkField';\nimport { prefixString } from './common/stringUtils';\n\nconst useStyles = makeStyles(() => ({\n  details: {\n    flexDirection: 'column',\n  },\n}));\n\nconst DevicePage = () => {\n  const classes = useStyles();\n\n  const [item, setItem] = useState();\n\n  return (\n    <EditItemView endpoint=\"devices\" item={item} setItem={setItem}>\n      {item &&\n        <>\n          <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedRequired')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.name}\n                onChange={event => setItem({...item, name: event.target.value})}\n                label={t('sharedName')}\n                variant=\"filled\" />\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.uniqueId}\n                onChange={event => setItem({...item, uniqueId: event.target.value})}\n                label={t('deviceIdentifier')}\n                variant=\"filled\" />\n            </AccordionDetails>\n          </Accordion>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedExtra')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <SelectField\n                margin=\"normal\"\n                defaultValue={item.groupId}\n                onChange={event => setItem({...item, groupId: Number(event.target.value)})}\n                endpoint=\"/api/groups\"\n                label={t('groupParent')}\n                variant=\"filled\" />\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.phone}\n                onChange={event => setItem({...item, phone: event.target.value})}\n                label={t('sharedPhone')}\n                variant=\"filled\" />\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.model}\n                onChange={event => setItem({...item, model: event.target.value})}\n                label={t('deviceModel')}\n                variant=\"filled\" />\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.contact}\n                onChange={event => setItem({...item, contact: event.target.value})}\n                label={t('deviceContact')}\n                variant=\"filled\" />\n              <SelectField\n                margin=\"normal\"\n                defaultValue={item.category}\n                onChange={event => setItem({...item, category: event.target.value})}\n                data={deviceCategories.map(category => ({\n                  id: category,\n                  name: t(`category${category.replace(/^\\w/, c => c.toUpperCase())}`)\n                }))}\n                label={t('deviceCategory')}\n                variant=\"filled\" />\n              <FormControlLabel\n                control={<Checkbox checked={item.disabled} onChange={event => setItem({...item, disabled: event.target.checked})} />}\n                label={t('sharedDisabled')} />\n            </AccordionDetails>\n          </Accordion>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedAttributes')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <EditAttributesView\n                attributes={item.attributes}\n                setAttributes={attributes => setItem({...item, attributes})}\n                definitions={deviceAttributes}\n                />\n            </AccordionDetails>\n          </Accordion>\n          {item.id &&\n            <Accordion>\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography variant=\"subtitle1\">\n                  {t('sharedConnections')}\n                </Typography>\n              </AccordionSummary>\n              <AccordionDetails className={classes.details}>\n                <LinkField\n                  margin=\"normal\"\n                  endpointAll=\"/api/geofences\"\n                  endpointLinked={\"/api/geofences?deviceId=\" + item.id}\n                  baseId={item.id}\n                  keyBase=\"deviceId\"\n                  keyLink=\"geofenceId\"\n                  label={t('sharedGeofences')}\n                  variant=\"filled\" />\n                <LinkField\n                  margin=\"normal\"\n                  endpointAll=\"/api/notifications\"\n                  endpointLinked={\"/api/notifications?deviceId=\" + item.id}\n                  baseId={item.id}\n                  keyBase=\"deviceId\"\n                  keyLink=\"notificationId\"\n                  titleGetter={it => t(prefixString('event', it.type))}\n                  label={t('sharedNotifications')}\n                  variant=\"filled\" />\n              </AccordionDetails>\n            </Accordion>\n          }\n        </>\n      }\n    </EditItemView>\n  );\n}\n\nexport default DevicePage;\n","import React, { useState } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nimport t from './common/localization';\nimport userAttributes from './attributes/userAttributes';\nimport EditItemView from './EditItemView';\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport EditAttributesView from './attributes/EditAttributesView';\nimport LinkField from './form/LinkField';\n\nconst useStyles = makeStyles(() => ({\n  details: {\n    flexDirection: 'column',\n  },\n}));\n\nconst UserPage = () => {\n  const classes = useStyles();\n\n  const [item, setItem] = useState();\n\n  return (\n    <EditItemView endpoint=\"users\" item={item} setItem={setItem}>\n      {item &&\n        <>\n          <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedRequired')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.name}\n                onChange={event => setItem({...item, name: event.target.value})}\n                label={t('sharedName')}\n                variant=\"filled\" />\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.email}\n                onChange={event => setItem({...item, email: event.target.value})}\n                label={t('userEmail')}\n                variant=\"filled\" />\n              <TextField\n                margin=\"normal\"\n                type=\"password\"\n                onChange={event => setItem({...item, password: event.target.value})}\n                label={t('userPassword')}\n                variant=\"filled\" />\n            </AccordionDetails>\n          </Accordion>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedAttributes')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <EditAttributesView\n                attributes={item.attributes}\n                setAttributes={attributes => setItem({...item, attributes})}\n                definitions={userAttributes}\n                />\n            </AccordionDetails>\n          </Accordion>\n          {item.id &&\n            <Accordion>\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography variant=\"subtitle1\">\n                  {t('sharedConnections')}\n                </Typography>\n              </AccordionSummary>\n              <AccordionDetails className={classes.details}>\n                <LinkField\n                  margin=\"normal\"\n                  endpointAll=\"/api/devices?all=true\"\n                  endpointLinked={\"/api/devices?userId=\" + item.id}\n                  baseId={item.id}\n                  keyBase=\"userId\"\n                  keyLink=\"deviceId\"\n                  label={t('deviceTitle')}\n                  variant=\"filled\" />\n                <LinkField\n                  margin=\"normal\"\n                  endpointAll=\"/api/groups?all=true\"\n                  endpointLinked={\"/api/groups?userId=\" + item.id}\n                  baseId={item.id}\n                  keyBase=\"userId\"\n                  keyLink=\"groupId\"\n                  label={t('settingsGroups')}\n                  variant=\"filled\" />\n              </AccordionDetails>\n            </Accordion>\n          }\n        </>\n      }\n    </EditItemView>\n  );\n}\n\nexport default UserPage;\n","import { useDispatch, useSelector } from 'react-redux';\nimport { connect } from 'react-redux';\nimport { positionsActions, devicesActions, sessionActions } from './store';\nimport { useHistory } from 'react-router-dom';\nimport { useEffectAsync } from './reactHelper';\n\nconst displayNotifications = events => {\n  if (\"Notification\" in window) {\n    if (Notification.permission === \"granted\") {\n      for (const event of events) {\n        const notification = new Notification(`Event: ${event.type}`);\n        setTimeout(notification.close.bind(notification), 4 * 1000);\n      }\n    } else if (Notification.permission !== \"denied\") {\n      Notification.requestPermission(permission => {\n        if (permission === \"granted\") {\n          displayNotifications(events);\n        }\n      });\n    }\n  }\n};\n\nconst SocketController = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const authenticated = useSelector(state => !!state.session.user);\n\n  const connectSocket = () => {\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n    const socket = new WebSocket(protocol + '//' + window.location.host + '/api/socket');\n\n    socket.onclose = () => {\n      setTimeout(() => connectSocket(), 60 * 1000);\n    };\n\n    socket.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      if (data.devices) {\n        dispatch(devicesActions.update(data.devices));\n      }\n      if (data.positions) {\n        dispatch(positionsActions.update(data.positions));\n      }\n      if (data.events) {\n        displayNotifications(data.events);\n      }\n    };\n  }\n\n  useEffectAsync(async () => {\n    const response = await fetch('/api/server');\n    if (response.ok) {\n      dispatch(sessionActions.updateServer(await response.json()));\n    }\n  }, []);\n\n  useEffectAsync(async () => {\n    if (authenticated) {\n      const response = await fetch('/api/devices');\n      if (response.ok) {\n        dispatch(devicesActions.refresh(await response.json()));\n      }\n      connectSocket();\n    } else {\n      const response = await fetch('/api/session');\n      if (response.ok) {\n        dispatch(sessionActions.updateUser(await response.json()));\n      } else {\n        history.push('/login');\n      }\n    }\n  }, [authenticated]);\n\n  return null;\n}\n\nexport default connect()(SocketController);\n","import React, { useState } from 'react';\nimport MainToolbar from '../MainToolbar';\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, makeStyles, IconButton } from '@material-ui/core';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport t from '../common/localization';\nimport { useEffectAsync } from '../reactHelper';\nimport EditCollectionView from '../EditCollectionView';\nimport { prefixString } from '../common/stringUtils';\nimport { formatBoolean } from '../common/formatter';\n\nconst useStyles = makeStyles(theme => ({\n  columnAction: {\n    width: theme.spacing(1),\n    padding: theme.spacing(0, 1),\n  },\n}));\n\nconst NotificationsView = ({ updateTimestamp, onMenuClick }) => {\n  const classes = useStyles();\n\n  const [items, setItems] = useState([]);\n\n  useEffectAsync(async () => {\n    const response = await fetch('/api/notifications');\n    if (response.ok) {\n      setItems(await response.json());\n    }\n  }, [updateTimestamp]);\n\n  const formatList = (prefix, value) => {\n    if (value) {\n      return value\n        .split(/[, ]+/)\n        .filter(Boolean)\n        .map(it => t(prefixString(prefix, it)))\n        .join(', ');\n    }\n    return '';\n  };\n\n  return (\n    <TableContainer>\n    <Table>\n      <TableHead>\n        <TableRow>\n          <TableCell className={classes.columnAction} />\n          <TableCell>{t('notificationType')}</TableCell>\n          <TableCell>{t('notificationAlways')}</TableCell>\n          <TableCell>{t('sharedAlarms')}</TableCell>\n          <TableCell>{t('notificationNotificators')}</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {items.map(item => (\n          <TableRow key={item.id}>\n            <TableCell className={classes.columnAction} padding=\"none\">\n              <IconButton onClick={(event) => onMenuClick(event.currentTarget, item.id)}>\n                <MoreVertIcon />\n              </IconButton>\n            </TableCell>\n            <TableCell>{t(prefixString('event', item.type))}</TableCell>\n            <TableCell>{formatBoolean(item.always)}</TableCell>\n            <TableCell>{formatList('alarm', item.attributes.alarms)}</TableCell>\n            <TableCell>{formatList('notificator', item.notificators)}</TableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n    </TableContainer>\n  );\n}\n\nconst NotificationsPage = () => {\n  return (\n    <>\n      <MainToolbar />\n      <EditCollectionView content={NotificationsView} editPath=\"/settings/notification\" endpoint=\"notifications\" />\n    </>\n  );\n}\n\nexport default NotificationsPage;\n","import React, { useState } from 'react';\n\nimport t, { findStringKeys } from '../common/localization';\nimport EditItemView from '../EditItemView';\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography, FormControlLabel, Checkbox } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { prefixString, unprefixString } from '../common/stringUtils';\nimport SelectField from '../form/SelectField';\n\nconst useStyles = makeStyles(() => ({\n  details: {\n    flexDirection: 'column',\n  },\n}));\n\nconst NotificationPage = () => {\n  const classes = useStyles();\n\n  const [item, setItem] = useState();\n\n  const alarms = findStringKeys(it => it.startsWith('alarm')).map(it => ({\n    key: unprefixString('alarm', it),\n    name: t(it),\n  }));\n\n  return (\n    <EditItemView endpoint=\"notifications\" item={item} setItem={setItem}>\n      {item &&\n        <>\n          <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedRequired')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <SelectField\n                margin=\"normal\"\n                defaultValue={item.type}\n                onChange={e => setItem({...item, type: e.target.value})}\n                endpoint=\"/api/notifications/types\"\n                keyGetter={it => it.type}\n                titleGetter={it => t(prefixString('event', it.type))}\n                label={t('sharedType')}\n                variant=\"filled\" />\n              <SelectField\n                multiple\n                margin=\"normal\"\n                defaultValue={item.notificators ? item.notificators.split(/[, ]+/) : []}\n                onChange={e => setItem({...item, notificators: e.target.value.join()})}\n                endpoint=\"/api/notifications/notificators\"\n                keyGetter={it => it.type}\n                titleGetter={it => t(prefixString('notificator', it.type))}\n                label={t('notificationNotificators')}\n                variant=\"filled\" />\n              {item.type === 'alarm' &&\n                <SelectField\n                  multiple\n                  margin=\"normal\"\n                  defaultValue={item.attributes && item.attributes.alarms ? item.attributes.alarms.split(/[, ]+/) : []}\n                  onChange={e => setItem({...item, attributes: {...item.attributes, alarms: e.target.value.join()}})}\n                  data={alarms}\n                  keyGetter={it => it.key}\n                  label={t('sharedAlarms')}\n                  variant=\"filled\" />\n              }\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={item.always}\n                    onChange={event => setItem({...item, always: event.target.checked})}\n                    />\n                }\n                label={t('notificationAlways')} />\n            </AccordionDetails>\n          </Accordion>\n        </>\n      }\n    </EditItemView>\n  );\n}\n\nexport default NotificationPage;\n","import React, { useState } from 'react';\nimport MainToolbar from '../MainToolbar';\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, makeStyles, IconButton } from '@material-ui/core';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport t from '../common/localization';\nimport { useEffectAsync } from '../reactHelper';\nimport EditCollectionView from '../EditCollectionView';\n\nconst useStyles = makeStyles(theme => ({\n  columnAction: {\n    width: theme.spacing(1),\n    padding: theme.spacing(0, 1),\n  },\n}));\n\nconst GroupsView = ({ updateTimestamp, onMenuClick }) => {\n  const classes = useStyles();\n\n  const [items, setItems] = useState([]);\n\n  useEffectAsync(async () => {\n    const response = await fetch('/api/groups');\n    if (response.ok) {\n      setItems(await response.json());\n    }\n  }, [updateTimestamp]);\n\n  return (\n    <TableContainer>\n    <Table>\n      <TableHead>\n        <TableRow>\n          <TableCell className={classes.columnAction} />\n          <TableCell>{t('sharedName')}</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {items.map((item) => (\n          <TableRow key={item.id}>\n            <TableCell className={classes.columnAction} padding=\"none\">\n              <IconButton onClick={(event) => onMenuClick(event.currentTarget, item.id)}>\n                <MoreVertIcon />\n              </IconButton>\n            </TableCell>\n            <TableCell>{item.name}</TableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n    </TableContainer>\n  );\n}\n\nconst GroupsPage = () => {\n  return (\n    <>\n      <MainToolbar />\n      <EditCollectionView content={GroupsView} editPath=\"/settings/group\" endpoint=\"groups\" />\n    </>\n  );\n}\n\nexport default GroupsPage;\n","import React, { useState } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nimport t from '../common/localization';\nimport EditItemView from '../EditItemView';\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport EditAttributesView from '../attributes/EditAttributesView';\nimport deviceAttributes from '../attributes/deviceAttributes';\nimport SelectField from '../form/SelectField';\n\nconst useStyles = makeStyles(() => ({\n  details: {\n    flexDirection: 'column',\n  },\n}));\n\nconst GroupPage = () => {\n  const classes = useStyles();\n\n  const [item, setItem] = useState();\n\n  return (\n    <EditItemView endpoint=\"groups\" item={item} setItem={setItem}>\n      {item &&\n        <>\n          <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedRequired')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.name}\n                onChange={event => setItem({...item, name: event.target.value})}\n                label={t('sharedName')}\n                variant=\"filled\" />\n            </AccordionDetails>\n          </Accordion>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedExtra')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <SelectField\n                margin=\"normal\"\n                defaultValue={item.groupId}\n                onChange={event => setItem({...item, groupId: Number(event.target.value)})}\n                endpoint=\"/api/groups\"\n                label={t('groupParent')}\n                variant=\"filled\" />\n            </AccordionDetails>\n          </Accordion>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedAttributes')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <EditAttributesView\n                attributes={item.attributes}\n                setAttributes={attributes => setItem({...item, attributes})}\n                definitions={deviceAttributes}\n                />\n            </AccordionDetails>\n          </Accordion>\n        </>\n      }\n    </EditItemView>\n  );\n}\n\nexport default GroupPage;\n","import React, { Fragment, useState } from 'react';\n\nimport t from './common/localization';\nimport { makeStyles, Typography, ListItem, ListItemText, ListItemSecondaryAction, List, Container, Paper, Divider } from '@material-ui/core';\nimport { useParams } from 'react-router-dom';\nimport { useEffectAsync } from './reactHelper';\nimport MainToolbar from './MainToolbar';\nimport { formatPosition } from './common/formatter';\nimport { prefixString } from './common/stringUtils';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nconst PositionPage = () => {\n  const classes = useStyles();\n\n  const { id } = useParams();\n\n  const [item, setItem] = useState();\n\n  useEffectAsync(async () => {\n    if (id) {\n      const response = await fetch(`/api/positions?id=${id}`, {\n        headers: {\n          'Accept': 'application/json'\n        },\n      });\n      if (response.ok) {\n        const items = await response.json();\n        setItem(items[0]);\n      }\n    } else {\n      setItem({});\n    }\n  }, [id]);\n\n  const formatKey = (key) => {\n    return t(prefixString('position', key)) || `${t('sharedAttribute')} \"${key}\"`;\n  };\n\n  const attributesList = () => {\n    const combinedList = {...item, ...item.attributes};\n    return Object.entries(combinedList).filter(([_, value]) => typeof value !== 'object');\n  }\n\n  return (\n    <>\n      <MainToolbar />\n      <Container maxWidth='sm' className={classes.root}>\n        <Paper>\n          {item &&\n            <List>\n              {attributesList().map(([key, value], index, list) => (\n                <Fragment key={key}>\n                  <ListItem>\n                    <ListItemText\n                      primary={formatKey(key)}\n                      />\n                    <ListItemSecondaryAction>\n                      <Typography variant=\"body2\">\n                        {formatPosition(value, key)}\n                      </Typography>\n                    </ListItemSecondaryAction>\n                  </ListItem>\n                  {index < list.length - 1 ? <Divider /> : null}\n                </Fragment>\n              ))}\n            </List>\n          }\n        </Paper>\n      </Container>\n    </>\n  );\n}\n\nexport default PositionPage;\n","import React, { useState } from 'react';\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, Paper } from '@material-ui/core';\nimport { FormControl, InputLabel, Select, MenuItem } from '@material-ui/core';\nimport t from '../common/localization';\nimport { formatPosition } from '../common/formatter';\nimport ReportFilter from './ReportFilter';\nimport ReportLayoutPage from './ReportLayoutPage';\n\nconst ReportFilterForm = ({ setItems }) => {\n\n  const [eventTypes, setEventTypes] = useState(['allEvents']);\n\n  const handleSubmit = async (deviceId, from, to, mail, headers) => {\n    const query = new URLSearchParams({ deviceId, from, to, mail });\n    eventTypes.forEach(it => query.append('type', it));\n    const response = await fetch(`/api/reports/events?${query.toString()}`, { headers });\n    if (response.ok) {\n      const contentType = response.headers.get('content-type');\n      if (contentType) {\n        if (contentType === 'application/json') {\n          setItems(await response.json());\n        } else {\n          window.location.assign(window.URL.createObjectURL(await response.blob()));\n        }\n      }\n    }\n  };\n\n  return (\n    <ReportFilter handleSubmit={handleSubmit}>\n      <FormControl variant=\"filled\" margin=\"normal\" fullWidth>\n        <InputLabel>{t('reportEventTypes')}</InputLabel>\n        <Select value={eventTypes} onChange={e => setEventTypes(e.target.value)} multiple>\n          <MenuItem value=\"allEvents\">{t('eventAll')}</MenuItem>\n          <MenuItem value=\"deviceOnline\">{t('eventDeviceOnline')}</MenuItem>\n          <MenuItem value=\"deviceUnknown\">{t('eventDeviceUnknown')}</MenuItem>\n          <MenuItem value=\"deviceOffline\">{t('eventDeviceOffline')}</MenuItem>\n          <MenuItem value=\"deviceInactive\">{t('eventDeviceInactive')}</MenuItem>\n          <MenuItem value=\"deviceMoving\">{t('eventDeviceMoving')}</MenuItem>\n          <MenuItem value=\"deviceStopped\">{t('eventDeviceStopped')}</MenuItem>\n          <MenuItem value=\"deviceOverspeed\">{t('eventDeviceOverspeed')}</MenuItem>\n          <MenuItem value=\"deviceFuelDrop\">{t('eventDeviceFuelDrop')}</MenuItem>\n          <MenuItem value=\"commandResult\">{t('eventCommandResult')}</MenuItem>\n          <MenuItem value=\"geofenceEnter\">{t('eventGeofenceEnter')}</MenuItem>\n          <MenuItem value=\"geofenceExit\">{t('eventGeofenceExit')}</MenuItem>\n          <MenuItem value=\"alarm\">{t('eventAlarm')}</MenuItem>\n          <MenuItem value=\"ignitionOn\">{t('eventIgnitionOn')}</MenuItem>\n          <MenuItem value=\"ignitionOff\">{t('eventIgnitionOff')}</MenuItem>\n          <MenuItem value=\"maintenance\">{t('eventMaintenance')}</MenuItem>\n          <MenuItem value=\"textMessage\">{t('eventTextMessage')}</MenuItem>\n          <MenuItem value=\"driverChanged\">{t('eventDriverChanged')}</MenuItem>\n        </Select>\n      </FormControl>\n    </ReportFilter>\n  );\n}\n\nconst EventReportPage = () => {\n\n  const [items, setItems] = useState([]);\n\n  return (\n    <ReportLayoutPage reportFilterForm={ReportFilterForm} setItems={setItems}>\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>{t('positionFixTime')}</TableCell>\n              <TableCell>{t('sharedType')}</TableCell>\n              <TableCell>{t('sharedGeofence')}</TableCell>\n              <TableCell>{t('sharedMaintenance')}</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {items.map(item => (\n              <TableRow key={item.id}>\n                <TableCell>{formatPosition(item, 'serverTime')}</TableCell>\n                <TableCell>{item.type}</TableCell>\n                <TableCell>{}</TableCell>\n                <TableCell>{}</TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </ReportLayoutPage>\n  );\n}\n\nexport default EventReportPage;\n","import mapboxgl from 'mapbox-gl';\nimport { useEffect } from 'react';\nimport { map } from './Map';\n\nconst ReplayPathMap = ({ positions }) => {\n  const id = 'replay';\n\n  useEffect(() => {\n    map.addSource(id, {\n      'type': 'geojson',\n      'data': {\n        type: 'Feature',\n        geometry: {\n          type: 'LineString',\n          coordinates: [],\n        },\n      },\n    });\n    map.addLayer({\n      'source': id,\n      'id': id,\n      'type': 'line',\n      'layout': {\n        'line-join': 'round',\n        'line-cap': 'round',\n      },\n      'paint': {\n         'line-color': '#333',\n         'line-width': 5,\n      },\n    });\n\n    return () => {\n      map.removeLayer(id);\n      map.removeSource(id);\n    };\n  }, []);\n\n  useEffect(() => {\n    const coordinates = positions.map(item => [item.longitude, item.latitude]);\n    map.getSource(id).setData({\n      type: 'Feature',\n      geometry: {\n        type: 'LineString',\n        coordinates: coordinates,\n      },\n    });\n    if (coordinates.length) {\n      const bounds = coordinates.reduce((bounds, item) => bounds.extend(item), new mapboxgl.LngLatBounds(coordinates[0], coordinates[0]));\n      map.fitBounds(bounds, {\n        padding: { top: 50, bottom: 250, left: 25, right: 25 },\n      });\n    }\n  }, [positions]);\n\n  return null;\n}\n\nexport default ReplayPathMap;\n","import React, { useState } from 'react';\nimport { Accordion, AccordionDetails, AccordionSummary, Container, makeStyles, Paper, Slider, Tooltip, Typography } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport MainToolbar from '../MainToolbar';\nimport Map from '../map/Map';\nimport t from '../common/localization';\nimport ReplayPathMap from '../map/ReplayPathMap';\nimport PositionsMap from '../map/PositionsMap';\nimport { formatPosition } from '../common/formatter';\nimport ReportFilter from './ReportFilter';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  controlPanel: {\n    position: 'absolute',\n    bottom: theme.spacing(5),\n    left: '50%',\n    transform: 'translateX(-50%)',\n  },\n  controlContent: {\n    padding: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n  configForm: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n}));\n\nconst TimeLabel = ({ children, open, value }) => {\n  return (\n    <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value}>\n      {children}\n    </Tooltip>\n  );\n};\n\nconst ReplayPage = () => {\n  const classes = useStyles();\n\n  const [expanded, setExpanded] = useState(true);\n  const [positions, setPositions] = useState([]);\n  const [index, setIndex] = useState(0);\n\n  const handleSubmit = async (deviceId, from, to, _, headers) => {\n    const query = new URLSearchParams({ deviceId, from, to });\n    const response = await fetch(`/api/positions?${query.toString()}`, { headers });\n    if (response.ok) {\n      setIndex(0);\n      setPositions(await response.json());\n      setExpanded(false);\n    }\n  };\n\n  return (\n    <div className={classes.root}>\n      <MainToolbar />\n      <Map>\n        <ReplayPathMap positions={positions} />\n        {index < positions.length &&\n          <PositionsMap positions={[positions[index]]} />\n        }\n      </Map>\n      <Container maxWidth=\"sm\" className={classes.controlPanel}>\n        {!!positions.length &&\n          <Paper className={classes.controlContent}>\n            <Slider\n              max={positions.length - 1}\n              step={null}\n              marks={positions.map((_, index) => ({ value: index }))}\n              value={index}\n              onChange={(_, index) => setIndex(index)}\n              valueLabelDisplay=\"auto\"\n              valueLabelFormat={i => i < positions.length ? formatPosition(positions[i], 'fixTime') : ''}\n              ValueLabelComponent={TimeLabel}\n              />\n          </Paper>\n        }\n        <div>\n          <Accordion expanded={expanded} onChange={() => setExpanded(!expanded)}>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography align='center'>\n                {t('reportConfigure')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.configForm}>\n              <ReportFilter handleSubmit={handleSubmit} showOnly />\n            </AccordionDetails>\n          </Accordion>\n        </div>\n      </Container>\n    </div>\n  );\n}\n\nexport default ReplayPage;\n","import React, { useState } from 'react';\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, Paper } from '@material-ui/core';\nimport t from '../common/localization';\nimport { formatDistance, formatSpeed, formatHours, formatDate } from '../common/formatter';\nimport ReportFilter from './ReportFilter';\nimport ReportLayoutPage from './ReportLayoutPage';\nimport { useAttributePreference } from '../common/preferences';\n\nconst ReportFilterForm = ({ setItems }) => {\n\n  const handleSubmit = async (deviceId, from, to, mail, headers) => {\n    const query = new URLSearchParams({ deviceId, from, to, mail });\n    const response = await fetch(`/api/reports/trips?${query.toString()}`, { headers });\n    if (response.ok) {\n      const contentType = response.headers.get('content-type');\n      if (contentType) {\n        if (contentType === 'application/json') {\n          setItems(await response.json());\n        } else {\n          window.location.assign(window.URL.createObjectURL(await response.blob()));\n        }\n      }\n    }\n  }\n\n  return <ReportFilter handleSubmit={handleSubmit} />;\n}\n\nconst TripReportPage = () => {\n  \n  const distanceUnit = useAttributePreference('distanceUnit');\n  const speedUnit = useAttributePreference('speedUnit');\n  const [items, setItems] = useState([]);\n\n  return (\n    <ReportLayoutPage reportFilterForm={ReportFilterForm} setItems={setItems}>\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>{t('reportStartTime')}</TableCell>\n              <TableCell>{t('reportStartOdometer')}</TableCell>\n              <TableCell>{t('reportEndTime')}</TableCell>\n              <TableCell>{t('reportEndOdometer')}</TableCell>\n              <TableCell>{t('sharedDistance')}</TableCell>\n              <TableCell>{t('reportAverageSpeed')}</TableCell>\n              <TableCell>{t('reportMaximumSpeed')}</TableCell>\n              <TableCell>{t('reportDuration')}</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {items.map((item) => (\n              <TableRow key={item.id}>\n                <TableCell>{formatDate(item.startTime)}</TableCell>\n                <TableCell>{formatDistance(item.startOdometer, distanceUnit)}</TableCell>\n                <TableCell>{formatDate(item.endTime)}</TableCell>\n                <TableCell>{formatDistance(item.endOdometer, distanceUnit)}</TableCell>\n                <TableCell>{formatDistance(item.distance, distanceUnit)}</TableCell>\n                <TableCell>{formatSpeed(item.averageSpeed, speedUnit)}</TableCell>\n                <TableCell>{formatSpeed(item.maxSpeed, speedUnit)}</TableCell>\n                <TableCell>{formatHours(item.duration)}</TableCell>                             \n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </ReportLayoutPage>\n  );\n}\n\nexport default TripReportPage;\n","import React, { useState } from 'react';\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, Paper } from '@material-ui/core';\nimport t from '../common/localization';\nimport { formatDistance, formatHours, formatDate, formatVolume } from '../common/formatter';\nimport ReportFilter from './ReportFilter';\nimport ReportLayoutPage from './ReportLayoutPage';\nimport { useAttributePreference } from '../common/preferences';\n\nconst ReportFilterForm = ({ setItems }) => {\n\n  const handleSubmit = async (deviceId, from, to, mail, headers) => {\n    const query = new URLSearchParams({ deviceId, from, to, mail });\n    const response = await fetch(`/api/reports/stops?${query.toString()}`, { headers });\n    if (response.ok) {\n      const contentType = response.headers.get('content-type');\n      if (contentType) {\n        if (contentType === 'application/json') {\n          setItems(await response.json());\n        } else {\n          window.location.assign(window.URL.createObjectURL(await response.blob()));\n        }\n      }\n    }\n  }\n\n  return <ReportFilter handleSubmit={handleSubmit} />;\n};\n\nconst StopReportPage = () => {\n\n  const distanceUnit = useAttributePreference('distanceUnit');\n  const [items, setItems] = useState([]);\n  \n  return (\n    <ReportLayoutPage reportFilterForm={ReportFilterForm} setItems={setItems}>\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>{t('reportStartTime')}</TableCell>\n              <TableCell>{t('positionOdometer')}</TableCell>\n              <TableCell>{t('reportEndTime')}</TableCell>\n              <TableCell>{t('reportDuration')}</TableCell>\n              <TableCell>{t('reportEngineHours')}</TableCell>\n              <TableCell>{t('reportSpentFuel')}</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {items.map((item) => (\n              <TableRow key={item.id}>\n                <TableCell>{formatDate(item.startTime)}</TableCell>\n                <TableCell>{formatDistance(item.startOdometer, distanceUnit)}</TableCell>\n                <TableCell>{formatDate(item.endTime)}</TableCell>\n                <TableCell>{formatHours(item.duration)}</TableCell>\n                <TableCell>{formatHours(item.engineHours)}</TableCell>\n                <TableCell>{formatVolume(item.spentFuel)}</TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </ReportLayoutPage>\n  );\n};\n\nexport default StopReportPage;\n","import React, { useState } from 'react';\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, Paper, FormControlLabel, Checkbox } from '@material-ui/core';\nimport t from '../common/localization';\nimport { formatDistance, formatHours, formatDate, formatSpeed, formatVolume } from '../common/formatter';\nimport ReportFilter from './ReportFilter';\nimport ReportLayoutPage from './ReportLayoutPage';\nimport { useAttributePreference } from '../common/preferences';\n\nconst ReportFilterForm = ({ setItems }) => {\n\n  const [daily, setDaily] = useState(false);\n\n  const handleSubmit = async (deviceId, from, to, mail, headers) => {\n    const query = new URLSearchParams({ deviceId, from, to, daily, mail });\n    const response = await fetch(`/api/reports/summary?${query.toString()}`, { headers });\n    if (response.ok) {\n      const contentType = response.headers.get('content-type');\n      if (contentType) {\n        if (contentType === 'application/json') {\n          setItems(await response.json());\n        } else {\n          window.location.assign(window.URL.createObjectURL(await response.blob()));\n        }\n      }\n    }\n  }\n\n  return (\n    <ReportFilter handleSubmit={handleSubmit}>\n      <FormControlLabel\n        control={<Checkbox checked={daily} onChange={e => setDaily(e.target.checked)} />}\n        label={t('reportDaily')} />\n    </ReportFilter>\n  );\n}\n\nconst SummaryReportPage = () => {\n\n  const distanceUnit = useAttributePreference('distanceUnit');\n  const speedUnit = useAttributePreference('speedUnit');\n  const [items, setItems] = useState([]);\n  \n  return (\n    <ReportLayoutPage reportFilterForm={ReportFilterForm} setItems={setItems}>\n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>{t('reportStartDate')}</TableCell>\n              <TableCell>{t('sharedDistance')}</TableCell>\n              <TableCell>{t('reportStartOdometer')}</TableCell>\n              <TableCell>{t('reportEndOdometer')}</TableCell>\n              <TableCell>{t('reportAverageSpeed')}</TableCell>\n              <TableCell>{t('reportMaximumSpeed')}</TableCell>\n              <TableCell>{t('reportEngineHours')}</TableCell>              \n              <TableCell>{t('reportSpentFuel')}</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {items.map((item) => (\n              <TableRow key={item.id}>\n                <TableCell>{formatDate(item.startTime, 'YYYY-MM-DD')}</TableCell>\n                <TableCell>{formatDistance(item.distance, distanceUnit)}</TableCell>\n                <TableCell>{formatDistance(item.startOdometer, distanceUnit)}</TableCell>\n                <TableCell>{formatDistance(item.endOdometer, distanceUnit)}</TableCell>\n                <TableCell>{formatSpeed(item.averageSpeed, speedUnit)}</TableCell>\n                <TableCell>{formatSpeed(item.maxSpeed, speedUnit)}</TableCell>\n                <TableCell>{formatHours(item.engineHours)}</TableCell>\n                <TableCell>{formatVolume(item.spentFuel)}</TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </ReportLayoutPage>\n  );\n}\n\nexport default SummaryReportPage;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom'\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport MainPage from './MainPage';\nimport LoginPage from './LoginPage';\nimport RouteReportPage from './reports/RouteReportPage';\nimport ServerPage from './admin/ServerPage';\nimport UsersPage from './admin/UsersPage';\nimport DevicePage from './DevicePage';\nimport UserPage from './UserPage';\nimport SocketController from './SocketController';\nimport NotificationsPage from './settings/NotificationsPage';\nimport NotificationPage from './settings/NotificationPage';\nimport GroupsPage from './settings/GroupsPage';\nimport GroupPage from './settings/GroupPage';\nimport PositionPage from './PositionPage';\nimport EventReportPage from './reports/EventReportPage';\nimport ReplayPage from './reports/ReplayPage';\nimport { useSelector } from 'react-redux';\nimport { LinearProgress } from '@material-ui/core';\nimport TripReportPage from './reports/TripReportPage';\nimport StopReportPage from './reports/StopReportPage';\nimport SummaryReportPage from './reports/SummaryReportPage';\n\nconst App = () => {\n  const initialized = useSelector(state => !!state.session.server && !!state.session.user);\n\n  return (\n    <>\n      <CssBaseline />\n      <SocketController />\n      <Switch>\n        <Route exact path='/login' component={LoginPage} />\n        <Route>\n          {!initialized ? (<LinearProgress />) : (\n            <Switch>\n              <Route exact path='/' component={MainPage} />\n              <Route exact path='/replay' component={ReplayPage} />\n              <Route exact path='/position/:id?' component={PositionPage} />\n              <Route exact path='/user/:id?' component={UserPage} />\n              <Route exact path='/device/:id?' component={DevicePage} />\n              <Route exact path='/reports/route' component={RouteReportPage} />\n              <Route exact path='/settings/notifications' component={NotificationsPage} />\n              <Route exact path='/settings/notification/:id?' component={NotificationPage} />\n              <Route exact path='/settings/groups' component={GroupsPage} />\n              <Route exact path='/settings/group/:id?' component={GroupPage} />\n              <Route exact path='/admin/server' component={ServerPage} />\n              <Route exact path='/admin/users' component={UsersPage} />\n              <Route exact path='/reports/event' component={EventReportPage} />\n              <Route exact path='/reports/trip' component={TripReportPage} />\n              <Route exact path='/reports/stop' component={StopReportPage} />\n              <Route exact path='/reports/summary' component={SummaryReportPage} />\n            </Switch>\n          )}\n        </Route>\n      </Switch>\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}","import 'typeface-roboto'\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport store from './store';\n\nReactDOM.render((\n  <Provider store={store}>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </Provider>\n), document.getElementById('root'));\n\nserviceWorker.register();\n"],"sourceRoot":""}